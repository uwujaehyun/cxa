{"version":3,"file":"index.js","sources":["../src/utils.js","../src/Context/FeedManager.js","../src/errors.js","../src/Context/StreamApp.js","../src/Context/Feed.js","../src/images/placeholder.png","../src/components/Avatar.js","../src/components/UserBar.js","../src/components/Card.js","../src/components/Audio.js","../src/components/Video.js","../src/components/Gallery.js","../src/components/Activity.js","../src/components/Link.js","../src/components/NewActivitiesNotification.js","../src/components/Button.js","../src/components/LoadMoreButton.js","../src/components/LoadMorePaginator.js","../src/components/FeedPlaceholder.js","../src/components/FlatFeed.js","../src/components/AvatarGroup.js","../src/components/AttachedActivity.js","../src/components/Dropdown.js","../src/components/Notification.js","../src/components/NotificationFeed.js","../src/components/SinglePost.js","../src/components/Panel.js","../src/components/PanelHeader.js","../src/components/PanelFooter.js","../src/components/PanelContent.js","../src/components/Textarea.js","../src/components/EmojiPicker.js","../src/components/Title.js","../src/components/StatusUpdateForm.js","../src/components/IconBadge.js","../src/components/DropdownPanel.js","../src/components/NotificationDropdown.js","../src/components/InfiniteScroll.js","../src/components/InfiniteScrollPaginator.js","../src/components/ReactionIcon.js","../src/components/ReactionToggleIcon.js","../src/images/like-active@1x.png","../src/images/like@1x.png","../src/components/LikeButton.js","../src/images/repost-active@1x.png","../src/images/repost@1x.png","../src/components/RepostButton.js","../src/components/FollowButton.js","../src/components/ReactionList.js","../src/components/Flex.js","../src/components/CommentItem.js","../src/components/CommentList.js","../src/components/CommentField.js","../src/components/DataLabel.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport moment from 'moment';\nimport URL from 'url-parse';\nimport anchorme from 'anchorme';\nimport _truncate from 'lodash/truncate';\nimport twitter from 'twitter-text';\nimport type { UserResponse } from './types';\n\nimport type { Renderable, RenderableButNotElement, FileLike } from './types';\n// import type { UserResponse } from 'getstream';\n\nexport function humanizeTimestamp(timestamp: string | number): string {\n  const time = moment.utc(timestamp); // parse time as UTC\n  const now = moment();\n  // Not in future humanized time\n  return moment.min(time, now).from(now);\n}\n\nexport const smartRender = (\n  ElementOrComponentOrLiteral: Renderable,\n  props?: {},\n  fallback?: Renderable,\n) => {\n  if (ElementOrComponentOrLiteral === undefined) {\n    ElementOrComponentOrLiteral = fallback;\n  }\n  if (React.isValidElement(ElementOrComponentOrLiteral)) {\n    // Flow cast through any, to make flow believe it's a React.Element\n    const element = ((ElementOrComponentOrLiteral: any): React.Element<any>);\n    return element;\n  }\n\n  // Flow cast through any to remove React.Element after previous check\n  const ComponentOrLiteral = ((ElementOrComponentOrLiteral: any): RenderableButNotElement);\n  if (\n    typeof ComponentOrLiteral === 'string' ||\n    typeof ComponentOrLiteral === 'number' ||\n    typeof ComponentOrLiteral === 'boolean' ||\n    ComponentOrLiteral == null\n  ) {\n    return ComponentOrLiteral;\n  }\n  return <ComponentOrLiteral {...props} />;\n};\n\nexport const getRetinaImage = (images: string) =>\n  images\n    .split('|')\n    .map((item, i) => `${item} ${i + 1}x`)\n    .join(', ');\n\nexport function userOrDefault(\n  user: UserResponse | string | {| error: string |},\n): UserResponse {\n  let actor: UserResponse;\n  const notFound = {\n    id: '!not-found',\n    created_at: '',\n    updated_at: '',\n    data: { name: 'Unknown', profileImage: '' },\n  };\n  if (typeof user === 'string' || typeof user.error === 'string') {\n    actor = notFound;\n  } else {\n    //$FlowBug\n    actor = (user: any);\n  }\n  return actor;\n}\n\nexport function sleep(ms: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// https://stackoverflow.com/a/6860916/2570866\nexport function generateRandomId() {\n  // prettier-ignore\n  return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n}\n\nfunction S4() {\n  return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n}\n\nexport function dataTransferItemsHaveFiles(\n  items: ?(DataTransferItem[]),\n): boolean {\n  if (!items || !items.length) {\n    return false;\n  }\n  for (const item of items) {\n    if (item.kind === 'file' || item.type === 'text/html') {\n      return true;\n    }\n  }\n  return false;\n}\nexport async function dataTransferItemsToFiles(\n  items: ?(DataTransferItem[]),\n): Promise<FileLike[]> {\n  if (!items || !items.length) {\n    return [];\n  }\n  const fileLikes = [];\n  const blobPromises = [];\n  for (const item of items) {\n    if (item.kind === 'file') {\n      const file = item.getAsFile();\n      if (file) {\n        fileLikes.push(file);\n      }\n    }\n  }\n  // If there are files inside the DataTransferItem prefer those\n  if (fileLikes.length) {\n    return fileLikes;\n  }\n\n  // Otherwise extract images from html\n  const parser = new DOMParser();\n  for (const item of items) {\n    if (item.type === 'text/html') {\n      blobPromises.push(\n        new Promise((accept) => {\n          item.getAsString(async (s) => {\n            const doc = parser.parseFromString(s, 'text/html');\n            const imageTags = doc.getElementsByTagName('img');\n\n            const imagePromises = [];\n            for (const tag of imageTags) {\n              if (!tag.src) {\n                continue;\n              }\n              imagePromises.push(\n                (async () => {\n                  let res;\n                  try {\n                    res = await fetch(tag.src);\n                  } catch (e) {\n                    return;\n                  }\n                  const contentType =\n                    res.headers.get('Content-type') ||\n                    'application/octet-stream';\n                  const buf = await res.arrayBuffer();\n                  const blob = new Blob([buf], { type: contentType });\n                  fileLikes.push(blob);\n                })(),\n              );\n            }\n            await Promise.all(imagePromises);\n            accept();\n          });\n        }),\n      );\n    }\n  }\n  await Promise.all(blobPromises);\n  return fileLikes;\n}\n\nexport function inputValueFromEvent(\n  event?: ?SyntheticEvent<HTMLTextAreaElement> | ?Event,\n): ?string {\n  if (!event) {\n    return;\n  }\n  let target;\n  if (event.currentTarget) {\n    target = event.currentTarget;\n  } else {\n    target = event.target;\n  }\n  // Trick flow into believing the target maybe has a value field\n  const inputTarget: { value?: string } = (target: any);\n  return inputTarget.value;\n}\n\nexport function sanitizeURL(url: ?string): ?string {\n  if (url == null) {\n    return url;\n  }\n\n  const proto = URL(url).protocol;\n  // allow http, https, ftp\n  // IMPORTANT: Don't allow data: protocol because of:\n  // <a href=\"data:text/html;base64,PHNjcmlwdD5hbGVydCgneHNzJyk7PC9zY3JpcHQ+\" target=\"_blank\">here</a>\n  if (proto === 'https:' || proto === 'http:' || proto === 'ftp:') {\n    return url;\n  }\n  return undefined;\n}\n\nexport const textRenderer = (\n  text: string,\n  parentClass: string,\n  onClickMention?: (word: string) => mixed,\n  onClickHashtag?: (word: string) => mixed,\n) =>\n  text\n    .split(' ')\n    .map((word, i) => {\n      if (onClickMention && word.includes('@')) {\n        const mention = twitter.extractMentions(word);\n        if (!mention.length) return word;\n\n        return (\n          <React.Fragment key={`item-${i}`}>\n            {!word.startsWith(`@${mention[0]}`) &&\n              word.slice(0, word.indexOf(mention[0]) - 1)}\n            <a\n              onClick={() => onClickMention && onClickMention(mention[0])}\n              className={`${parentClass}__mention`}\n            >\n              @{mention[0]}\n            </a>\n            {!word.endsWith(mention[0]) &&\n              word.slice(word.indexOf(mention[0]) + mention[0].length)}\n          </React.Fragment>\n        );\n      } else if (onClickHashtag && word.includes('#')) {\n        const hashtag = twitter.extractHashtags(word);\n        if (!hashtag.length) return word;\n\n        return (\n          <React.Fragment key={`item-${i}`}>\n            {!word.startsWith(`#${hashtag[0]}`) &&\n              word.slice(0, word.indexOf(hashtag[0]) - 1)}\n            <a\n              onClick={() => onClickHashtag && onClickHashtag(hashtag[0])}\n              className={`${parentClass}__hashtag`}\n            >\n              #{hashtag[0]}\n            </a>\n            {!word.endsWith(hashtag[0]) &&\n              word.slice(word.indexOf(hashtag[0]) + hashtag[0].length)}\n          </React.Fragment>\n        );\n      }\n      if (anchorme.validate.url(word) || anchorme.validate.email(word)) {\n        const link = anchorme(word, { list: true });\n        if (\n          link[0].protocol !== 'http://' &&\n          link[0].protocol !== 'https://' &&\n          link[0].protocol !== 'mailto:'\n        ) {\n          return word;\n        }\n        const url = link[0].protocol + link[0].encoded;\n        const urlText = _truncate(link[0].encoded, { length: 33 });\n        return (\n          <a\n            href={url}\n            className={`${parentClass}__link`}\n            target=\"blank\"\n            rel=\"noopener\"\n            key={`item-${i}`}\n          >\n            {urlText}\n          </a>\n        );\n      }\n\n      return word;\n    })\n    .reduce((accu, elem) => (accu === null ? [elem] : [accu, ' ', elem]));\n","// @flow\n\nimport immutable from 'immutable';\nimport URL from 'url-parse';\nimport type {\n  FeedRequestOptions,\n  FeedResponse,\n  ReactionRequestOptions,\n  ReactionFilterResponse,\n  ReactionFilterOptions,\n} from 'getstream';\nimport type {\n  BaseActivityResponse,\n  BaseActivityGroupResponse,\n  BaseReaction,\n} from '../types';\nimport type { FeedInnerProps } from './Feed';\nimport { generateRandomId } from '../utils';\nimport _isPlainObject from 'lodash/isPlainObject';\nimport _isEqual from 'lodash/isEqual';\nimport _remove from 'lodash/remove';\n\n// type FR = FeedResponse<Object, Object>;\ntype FR = FeedResponse<{}, {}>;\ntype RR = ReactionFilterResponse<{}, {}>;\n\ntype FeedManagerState = {|\n  activityOrder: Array<string>,\n  activities: any,\n  refreshing: boolean,\n  lastResponse: ?FR,\n  lastReverseResponse: ?{ next: string },\n  realtimeAdds: Array<{}>,\n  realtimeDeletes: Array<{}>,\n  subscription: ?any,\n  activityIdToPath: { [string]: Array<string> },\n  // activities created by creating a reaction with targetFeeds. It's a mapping\n  // of a reaction id to an activity id.\n  reactionActivities: { [string]: string },\n  // Used for finding reposted activities\n  activityIdToPaths: { [string]: Array<Array<string>> },\n  reactionIdToPaths: { [string]: Array<Array<string>> },\n  unread: number,\n  unseen: number,\n  numSubscribers: number,\n  reactionsBeingToggled: { [kind: string]: { [activityId: string]: boolean } },\n  childReactionsBeingToggled: {\n    [kind: string]: { [reactionId: string]: boolean },\n  },\n|};\n\nexport class FeedManager {\n  props: FeedInnerProps;\n  state: FeedManagerState = {\n    activityOrder: [],\n    activities: immutable.Map(),\n    activityIdToPath: {},\n    activityIdToPaths: {},\n    reactionIdToPaths: {},\n    reactionActivities: {},\n    lastResponse: null,\n    lastReverseResponse: null,\n    refreshing: false,\n    realtimeAdds: [],\n    realtimeDeletes: [],\n    subscription: null,\n    unread: 0,\n    unseen: 0,\n    numSubscribers: 0,\n    reactionsBeingToggled: {},\n    childReactionsBeingToggled: {},\n  };\n  registeredCallbacks: Array<() => mixed>;\n\n  constructor(props: FeedInnerProps) {\n    this.props = props;\n    const initialOptions = this.getOptions();\n    this.registeredCallbacks = [];\n    let previousUrl = '';\n    if (initialOptions.id_gte) {\n      previousUrl = `?id_lt=${initialOptions.id_gte}`;\n    } else if (initialOptions.id_gt) {\n      previousUrl = `?id_lte=${initialOptions.id_gt}`;\n    } else if (initialOptions.id_lte) {\n      previousUrl = `?id_gt=${initialOptions.id_lte}`;\n    } else if (initialOptions.id_lt) {\n      previousUrl = `?id_gte=${initialOptions.id_lt}`;\n    }\n    this.state.lastReverseResponse = { next: previousUrl };\n  }\n\n  register(callback: () => mixed) {\n    this.registeredCallbacks.push(callback);\n    this.subscribe();\n  }\n  unregister(callback: () => mixed) {\n    this.registeredCallbacks.splice(this.registeredCallbacks.indexOf(callback));\n    this.unsubscribe();\n  }\n\n  triggerUpdate() {\n    for (const callback of this.registeredCallbacks) {\n      callback();\n    }\n  }\n\n  setState = (\n    changed:\n      | $Shape<FeedManagerState>\n      | ((FeedManagerState) => $Shape<FeedManagerState>),\n  ) => {\n    if (typeof changed === 'function') {\n      changed = changed(this.state);\n    }\n    this.state = { ...this.state, ...changed };\n    this.triggerUpdate();\n  };\n\n  trackAnalytics = (\n    label: string,\n    activity: BaseActivityResponse,\n    track: ?boolean,\n  ) => {\n    const analyticsClient = this.props.analyticsClient;\n\n    if (!track) {\n      return;\n    }\n    if (!analyticsClient) {\n      console.warn(\n        'trackAnalytics was enabled, but analytics client was not initialized. ' +\n          'Please set the analyticsToken prop on StreamApp',\n      );\n      return;\n    }\n\n    const feed = this.props.client.feed(\n      this.props.feedGroup,\n      this.props.userId,\n    );\n\n    analyticsClient.trackEngagement({\n      label,\n      feed_id: feed.id,\n      content: {\n        foreign_id: activity.foreign_id,\n      },\n      location: this.props.analyticsLocation,\n    });\n  };\n\n  getActivityPath = (\n    activity: BaseActivityResponse | string,\n    ...rest: Array<string>\n  ) => {\n    let activityId;\n    if (typeof activity === 'string') {\n      activityId = activity;\n    } else {\n      activityId = activity.id;\n    }\n\n    const activityPath = this.state.activityIdToPath[activityId];\n    if (activityPath === undefined) {\n      return [activityId, ...rest];\n    }\n    return [...activityPath, ...rest];\n  };\n\n  getActivityPaths = (activity: BaseActivityResponse | string) => {\n    let activityId;\n    if (typeof activity === 'string') {\n      activityId = activity;\n    } else {\n      activityId = activity.id;\n    }\n\n    return this.state.activityIdToPaths[activityId];\n  };\n\n  getReactionPaths = (reaction: BaseReaction | string) => {\n    let reactionId;\n    if (typeof reaction === 'string') {\n      reactionId = reaction;\n    } else {\n      reactionId = reaction.id;\n    }\n\n    return this.state.reactionIdToPaths[reactionId];\n  };\n\n  onAddReaction = async (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: { trackAnalytics?: boolean } & ReactionRequestOptions = {},\n  ) => {\n    let reaction;\n    try {\n      if (this.props.doReactionAddRequest) {\n        reaction = await this.props.doReactionAddRequest(\n          kind,\n          activity,\n          data,\n          options,\n        );\n      } else {\n        reaction = await this.props.client.reactions.add(\n          kind,\n          activity,\n          data,\n          options,\n        );\n      }\n    } catch (e) {\n      this.props.errorHandler(e, 'add-reaction', {\n        kind,\n        activity,\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    this.trackAnalytics(kind, activity, options.trackAnalytics);\n    const enrichedReaction = immutable.fromJS({\n      ...reaction,\n      user: this.props.user.full,\n    });\n\n    this.setState((prevState) => {\n      let { activities } = prevState;\n      const { reactionIdToPaths } = prevState;\n      for (const path of this.getActivityPaths(activity)) {\n        this.removeFoundReactionIdPaths(\n          activities.getIn(path).toJS(),\n          reactionIdToPaths,\n          path,\n        );\n\n        activities = activities\n          .updateIn([...path, 'reaction_counts', kind], (v = 0) => v + 1)\n          .updateIn([...path, 'own_reactions', kind], (v = immutable.List()) =>\n            v.unshift(enrichedReaction),\n          )\n          .updateIn(\n            [...path, 'latest_reactions', kind],\n            (v = immutable.List()) => v.unshift(enrichedReaction),\n          );\n\n        this.addFoundReactionIdPaths(\n          activities.getIn(path).toJS(),\n          reactionIdToPaths,\n          path,\n        );\n      }\n\n      return { activities, reactionIdToPaths };\n    });\n  };\n\n  onRemoveReaction = async (\n    kind: string,\n    activity: BaseActivityResponse,\n    id: string,\n    options: { trackAnalytics?: boolean } = {},\n  ) => {\n    try {\n      if (this.props.doReactionDeleteRequest) {\n        await this.props.doReactionDeleteRequest(id);\n      } else {\n        await this.props.client.reactions.delete(id);\n      }\n    } catch (e) {\n      this.props.errorHandler(e, 'delete-reaction', {\n        kind,\n        activity,\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    this.trackAnalytics('un' + kind, activity, options.trackAnalytics);\n\n    this.setState((prevState) => {\n      let { activities } = prevState;\n      const { reactionIdToPaths } = prevState;\n      for (const path of this.getActivityPaths(activity)) {\n        this.removeFoundReactionIdPaths(\n          activities.getIn(path).toJS(),\n          reactionIdToPaths,\n          path,\n        );\n\n        activities = activities\n          .updateIn([...path, 'reaction_counts', kind], (v = 0) => v - 1)\n          .updateIn([...path, 'own_reactions', kind], (v = immutable.List()) =>\n            v.remove(v.findIndex((r) => r.get('id') === id)),\n          )\n          .updateIn(\n            [...path, 'latest_reactions', kind],\n            (v = immutable.List()) =>\n              v.remove(v.findIndex((r) => r.get('id') === id)),\n          );\n\n        this.addFoundReactionIdPaths(\n          activities.getIn(path).toJS(),\n          reactionIdToPaths,\n          path,\n        );\n      }\n\n      return { activities, reactionIdToPaths };\n    });\n\n    if (this.state.reactionActivities[id]) {\n      this._removeActivityFromState(this.state.reactionActivities[id]);\n    }\n  };\n\n  onToggleReaction = async (\n    kind: string,\n    activity: BaseActivityResponse,\n    data: {},\n    options: { trackAnalytics?: boolean } & ReactionRequestOptions = {},\n  ) => {\n    const togglingReactions = this.state.reactionsBeingToggled[kind] || {};\n    if (togglingReactions[activity.id]) {\n      return;\n    }\n    togglingReactions[activity.id] = true;\n    this.state.reactionsBeingToggled[kind] = togglingReactions;\n\n    const currentReactions = this.state.activities.getIn(\n      [...this.getActivityPaths(activity)[0], 'own_reactions', kind],\n      immutable.List(),\n    );\n\n    const last = currentReactions.last();\n    if (last) {\n      await this.onRemoveReaction(kind, activity, last.get('id'), options);\n    } else {\n      await this.onAddReaction(kind, activity, data, options);\n    }\n    delete togglingReactions[activity.id];\n  };\n\n  onAddChildReaction = async (\n    kind: string,\n    reaction: BaseReaction,\n    data?: {},\n    options: { trackAnalytics?: boolean } & ReactionRequestOptions = {},\n  ) => {\n    let childReaction;\n    try {\n      if (this.props.doChildReactionAddRequest) {\n        childReaction = await this.props.doChildReactionAddRequest(\n          kind,\n          reaction,\n          data,\n          options,\n        );\n      } else {\n        childReaction = await this.props.client.reactions.addChild(\n          kind,\n          reaction,\n          data,\n          options,\n        );\n      }\n    } catch (e) {\n      this.props.errorHandler(e, 'add-child-reaction', {\n        kind,\n        reaction,\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n\n    // this.trackAnalytics(kind, reaction, options.trackAnalytics);\n    const enrichedReaction = immutable.fromJS({\n      ...childReaction,\n      user: this.props.user.full,\n    });\n\n    this.setState((prevState) => {\n      let { activities } = prevState;\n      for (const path of this.getReactionPaths(reaction)) {\n        activities = activities\n          .updateIn([...path, 'children_counts', kind], (v = 0) => v + 1)\n          .updateIn([...path, 'own_children', kind], (v = immutable.List()) =>\n            v.unshift(enrichedReaction),\n          )\n          .updateIn(\n            [...path, 'latest_children', kind],\n            (v = immutable.List()) => v.unshift(enrichedReaction),\n          );\n      }\n\n      return { activities };\n    });\n  };\n\n  onRemoveChildReaction = async (\n    kind: string,\n    reaction: BaseReaction,\n    id: string,\n    /* eslint-disable-next-line no-unused-vars */\n    options: { trackAnalytics?: boolean } = {},\n  ) => {\n    try {\n      if (this.props.doChildReactionDeleteRequest) {\n        await this.props.doChildReactionDeleteRequest(id);\n      } else {\n        await this.props.client.reactions.delete(id);\n      }\n    } catch (e) {\n      this.props.errorHandler(e, 'delete-reaction', {\n        kind,\n        reaction,\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    // this.trackAnalytics('un' + kind, reaction, options.trackAnalytics);\n    if (this.state.reactionActivities[id]) {\n      this._removeActivityFromState(this.state.reactionActivities[id]);\n    }\n\n    return this.setState((prevState) => {\n      let { activities } = prevState;\n      for (const path of this.getReactionPaths(reaction)) {\n        activities = activities\n          .updateIn([...path, 'children_counts', kind], (v = 0) => v - 1)\n          .updateIn([...path, 'own_children', kind], (v = immutable.List()) =>\n            v.remove(v.findIndex((r) => r.get('id') === id)),\n          )\n          .updateIn([...path, 'children', kind], (v = immutable.List()) =>\n            v.remove(v.findIndex((r) => r.get('id') === id)),\n          );\n      }\n\n      return { activities };\n    });\n  };\n\n  onToggleChildReaction = async (\n    kind: string,\n    reaction: BaseReaction,\n    data: {},\n    options: { trackAnalytics?: boolean } & ReactionRequestOptions = {},\n  ) => {\n    const togglingReactions = this.state.childReactionsBeingToggled[kind] || {};\n    if (togglingReactions[reaction.id]) {\n      return;\n    }\n    togglingReactions[reaction.id] = true;\n    this.state.childReactionsBeingToggled[kind] = togglingReactions;\n\n    const currentReactions = this.state.activities.getIn(\n      [...this.getReactionPaths(reaction)[0], 'own_children', kind],\n      immutable.List(),\n    );\n\n    const last = currentReactions.last();\n    if (last) {\n      await this.onRemoveChildReaction(kind, reaction, last.get('id'), options);\n    } else {\n      await this.onAddChildReaction(kind, reaction, data, options);\n    }\n    delete togglingReactions[reaction.id];\n  };\n\n  _removeActivityFromState = (activityId: string) =>\n    this.setState(\n      ({\n        activities,\n        activityOrder,\n        activityIdToPath,\n        activityIdToPaths,\n        reactionIdToPaths,\n      }) => {\n        const path = this.getActivityPath(activityId);\n        let outerId = activityId;\n        if (path.length > 1) {\n          // It's an aggregated group we should update the paths of everything in\n          // the list\n          const groupArrayPath = path.slice(0, -1);\n          activityIdToPath = this.removeFoundActivityIdPath(\n            activities.getIn(groupArrayPath).toJS(),\n            activityIdToPath,\n            groupArrayPath,\n          );\n          activityIdToPaths = this.removeFoundActivityIdPaths(\n            activities.getIn(groupArrayPath).toJS(),\n            activityIdToPaths,\n            groupArrayPath,\n          );\n          reactionIdToPaths = this.removeFoundReactionIdPaths(\n            activities.getIn(groupArrayPath).toJS(),\n            reactionIdToPaths,\n            groupArrayPath,\n          );\n        } else {\n          // Otherwise remove all things inside this activity from the path\n          // objects\n          activityIdToPaths = this.removeFoundActivityIdPaths(\n            activities.get(activityId).toJS(),\n            activityIdToPaths,\n            [activityId],\n          );\n          reactionIdToPaths = this.removeFoundReactionIdPaths(\n            activities.get(activityId).toJS(),\n            reactionIdToPaths,\n            [activityId],\n          );\n        }\n\n        activities = activities.removeIn(path);\n        if (path.length > 1) {\n          const groupArrayPath = path.slice(0, -1);\n          if (activities.getIn(groupArrayPath).size === 0) {\n            outerId = path[0]; //\n          } else {\n            outerId = null;\n          }\n          activityIdToPath = this.addFoundActivityIdPath(\n            activities.getIn(groupArrayPath).toJS(),\n            activityIdToPath,\n            groupArrayPath,\n          );\n          activityIdToPaths = this.addFoundActivityIdPaths(\n            activities.getIn(groupArrayPath).toJS(),\n            activityIdToPaths,\n            groupArrayPath,\n          );\n          reactionIdToPaths = this.addFoundReactionIdPaths(\n            activities.getIn(groupArrayPath).toJS(),\n            reactionIdToPaths,\n            groupArrayPath,\n          );\n        }\n        if (outerId != null) {\n          activityOrder = activityOrder.filter((id) => id !== outerId);\n        }\n        return {\n          activities,\n          activityOrder,\n          activityIdToPaths,\n          reactionIdToPaths,\n          activityIdToPath,\n        };\n      },\n    );\n\n  onRemoveActivity = async (activityId: string) => {\n    try {\n      if (this.props.doActivityDeleteRequest) {\n        await this.props.doActivityDeleteRequest(activityId);\n      } else {\n        await this.feed().removeActivity(activityId);\n      }\n    } catch (e) {\n      this.props.errorHandler(e, 'delete-activity', {\n        activityId: this.props.feedGroup,\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    return this._removeActivityFromState(activityId);\n  };\n\n  onMarkAsRead = (\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => this._onMarkAs('read', group);\n\n  onMarkAsSeen = (\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => this._onMarkAs('seen', group);\n\n  _onMarkAs = async (\n    type: 'seen' | 'read',\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => {\n    let groupArray: $ReadOnlyArray<string>;\n    let markArg = group;\n    if (group === true) {\n      groupArray = this.state.activityOrder;\n    } else if (Array.isArray(group)) {\n      groupArray = group.map((g) => g.id);\n      markArg = groupArray;\n    } else {\n      markArg = group.id;\n      groupArray = [group.id];\n    }\n    try {\n      await this.doFeedRequest({\n        limit: 1,\n        id_lte: this.state.activityOrder[0],\n        ['mark_' + type]: markArg,\n      });\n    } catch (e) {\n      this.props.errorHandler(e, 'get-notification-counts', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n    }\n    this.setState((prevState) => {\n      const counterKey = 'un' + type;\n      let activities = prevState.activities;\n      let counter = prevState[counterKey];\n      for (const groupId of groupArray) {\n        const markerPath = [groupId, 'is_' + type];\n        if (activities.getIn(markerPath) !== false) {\n          continue;\n        }\n        activities = activities.setIn(markerPath, true);\n        counter--;\n      }\n      return { activities, [counterKey]: counter };\n    });\n  };\n\n  getOptions = (extraOptions?: FeedRequestOptions = {}): FeedRequestOptions => {\n    const propOpts = { ...this.props.options };\n    const { id_gt, id_gte, id_lt, id_lte, offset } = extraOptions;\n    if (id_gt || id_gte || id_lt || id_lte || offset != null) {\n      delete propOpts.id_gt;\n      delete propOpts.id_gte;\n      delete propOpts.id_lt;\n      delete propOpts.id_lte;\n      delete propOpts.offset;\n      delete propOpts.refresh;\n    }\n\n    return {\n      withReactionCounts: true,\n      withOwnReactions: true,\n      limit: 10,\n      ...propOpts,\n      ...extraOptions,\n    };\n  };\n\n  doFeedRequest = (options: FeedRequestOptions): Promise<FR> => {\n    if (this.props.doFeedRequest) {\n      return this.props.doFeedRequest(\n        this.props.client,\n        this.props.feedGroup,\n        this.props.userId,\n        options,\n      );\n    }\n    return this.feed().get(options);\n  };\n\n  feed = () => this.props.client.feed(this.props.feedGroup, this.props.userId);\n\n  responseToActivityMap = (response: FR) =>\n    immutable.fromJS(\n      response.results.reduce((map, a) => {\n        map[a.id] = a;\n        return map;\n      }, {}),\n    );\n\n  responseToActivityIdToPath = (response: FR) => {\n    if (\n      response.results.length === 0 ||\n      response.results[0].activities === undefined\n    ) {\n      return {};\n    }\n    const aggregatedResponse = (response: any);\n\n    const map = {};\n    for (const group of aggregatedResponse.results) {\n      group.activities.forEach((act, i) => {\n        map[act.id] = [group.id, 'activities', i];\n      });\n    }\n    return map;\n  };\n\n  responseToActivityIdToPaths = (response: FR, previous: {} = {}) => {\n    const map = previous;\n    const currentPath = [];\n    function addFoundActivities(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundActivities(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.actor && obj.verb && obj.object) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          map[obj.id].push([...currentPath]);\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundActivities(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    for (const a of response.results) {\n      currentPath.push(a.id);\n      addFoundActivities((a: any));\n      currentPath.pop();\n    }\n    return map;\n  };\n\n  feedResponseToReactionIdToPaths = (response: FR, previous: {} = {}) => {\n    const map = previous;\n    const currentPath = [];\n    function addFoundReactions(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundReactions(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.kind && obj.data) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          map[obj.id].push([...currentPath]);\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundReactions(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    for (const a of response.results) {\n      currentPath.push(a.id);\n      addFoundReactions((a: any));\n      currentPath.pop();\n    }\n    return map;\n  };\n\n  reactionResponseToReactionIdToPaths = (\n    response: RR,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n    oldLength: number,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    function addFoundReactions(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundReactions(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.kind && obj.data) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          map[obj.id].push([...currentPath]);\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundReactions(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    for (const a of response.results) {\n      currentPath.push(oldLength);\n      addFoundReactions((a: any));\n      currentPath.pop();\n      oldLength++;\n    }\n    return map;\n  };\n\n  removeFoundReactionIdPaths = (\n    data: any,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    function removeFoundReactions(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          removeFoundReactions(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.kind && obj.data) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          _remove(map[obj.id], (path) => _isEqual(path, currentPath));\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          removeFoundReactions(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    removeFoundReactions(data);\n    return map;\n  };\n\n  removeFoundActivityIdPaths = (\n    data: any,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    function addFoundActivities(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundActivities(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.actor && obj.verb && obj.object) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          _remove(map[obj.id], (path) => _isEqual(path, currentPath));\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundActivities(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    addFoundActivities(data);\n    return map;\n  };\n\n  removeFoundActivityIdPath = (\n    data: any[],\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    data.forEach((obj, i) => {\n      currentPath.push(i);\n      if (_isEqual(map[obj.id], currentPath)) {\n        delete map[obj.id];\n      }\n      currentPath.pop();\n    });\n    return map;\n  };\n\n  addFoundReactionIdPaths = (\n    data: any,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    function addFoundReactions(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundReactions(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.kind && obj.data) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          map[obj.id].push([...currentPath]);\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundReactions(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    addFoundReactions(data);\n    return map;\n  };\n\n  addFoundActivityIdPaths = (\n    data: any,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    function addFoundActivities(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundActivities(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.actor && obj.verb && obj.object) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          map[obj.id].push([...currentPath]);\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundActivities(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n    addFoundActivities(data);\n    return map;\n  };\n\n  addFoundActivityIdPath = (\n    data: Array<{ id: string }>,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    data.forEach((obj, i) => {\n      map[obj.id] = [...basePath, i];\n    });\n    return map;\n  };\n\n  responseToReactionActivities = (response: FR) => {\n    if (response.results.length === 0) {\n      return {};\n    }\n    const map = {};\n    function setReactionActivities(activities: any) {\n      for (const a of activities) {\n        if (a.reaction && a.reaction.id) {\n          map[a.reaction.id] = a.id;\n        }\n      }\n    }\n\n    if (response.results[0].activities === undefined) {\n      setReactionActivities(response.results);\n    } else {\n      const aggregatedResponse = (response: any);\n\n      for (const group of aggregatedResponse.results) {\n        setReactionActivities(group.activities);\n      }\n    }\n    return map;\n  };\n\n  unseenUnreadFromResponse(response: FR) {\n    let unseen = 0;\n    let unread = 0;\n    if (typeof response.unseen === 'number') {\n      unseen = response.unseen;\n    }\n    if (typeof response.unread === 'number') {\n      unread = response.unread;\n    }\n    return { unseen, unread };\n  }\n\n  refresh = async (extraOptions: FeedRequestOptions) => {\n    const options = this.getOptions(extraOptions);\n\n    await this.setState({ refreshing: true });\n    let response: FR;\n    try {\n      response = await this.doFeedRequest(options);\n    } catch (e) {\n      this.setState({ refreshing: false });\n      this.props.errorHandler(e, 'get-feed', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n\n    const newState = {\n      activityOrder: response.results.map((a) => a.id),\n      activities: this.responseToActivityMap(response),\n      activityIdToPath: this.responseToActivityIdToPath(response),\n      activityIdToPaths: this.responseToActivityIdToPaths(response),\n      reactionIdToPaths: this.feedResponseToReactionIdToPaths(response),\n      reactionActivities: this.responseToReactionActivities(response),\n      refreshing: false,\n      lastResponse: response,\n      realtimeAdds: [],\n      realtimeDeletes: [],\n      ...this.unseenUnreadFromResponse(response),\n    };\n\n    if (options.mark_seen === true) {\n      newState.unseen = 0;\n    }\n    if (options.mark_read === true) {\n      newState.unread = 0;\n    }\n\n    return this.setState(newState);\n  };\n\n  subscribe = async () => {\n    if (this.props.notify) {\n      const feed = this.feed();\n      await this.setState((prevState) => {\n        if (prevState.subscription) {\n          return {};\n        }\n        const subscription = feed.subscribe((data) => {\n          this.setState((prevState) => {\n            const numActivityDiff = data.new.length - data.deleted.length;\n            return {\n              realtimeAdds: prevState.realtimeAdds.concat(data.new),\n              realtimeDeletes: prevState.realtimeDeletes.concat(data.deleted),\n              unread: prevState.unread + numActivityDiff,\n              unseen: prevState.unseen + numActivityDiff,\n            };\n          });\n        });\n\n        subscription.then(\n          () => {\n            console.log(\n              `now listening to changes in realtime for ${this.feed().id}`,\n            );\n          },\n          (err) => {\n            console.error(err);\n          },\n        );\n        return { subscription };\n      });\n    }\n  };\n\n  unsubscribe = async () => {\n    const { subscription } = this.state;\n    if (!subscription) {\n      return;\n    }\n    await subscription;\n    if (this.registeredCallbacks.length === 0) {\n      try {\n        await subscription.cancel();\n        console.log(\n          `stopped listening to changes in realtime for ${this.feed().id}`,\n        );\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  };\n\n  hasNextPage = () => {\n    const lastResponse = this.state.lastResponse;\n    return Boolean(lastResponse && lastResponse.next);\n  };\n\n  hasReverseNextPage = () => {\n    const { lastReverseResponse } = this.state;\n    return Boolean(lastReverseResponse && lastReverseResponse.next);\n  };\n\n  loadNextPage = async () => {\n    const lastResponse = this.state.lastResponse;\n    if (!lastResponse || !lastResponse.next) {\n      return;\n    }\n    let cancel = false;\n    await this.setState((prevState) => {\n      if (prevState.refreshing) {\n        cancel = true;\n        return {};\n      }\n      return { refreshing: true };\n    });\n\n    if (cancel) {\n      return;\n    }\n\n    const nextURL = new URL(lastResponse.next, true);\n    const options = this.getOptions(nextURL.query);\n\n    let response: FR;\n    try {\n      response = await this.doFeedRequest(options);\n    } catch (e) {\n      this.setState({ refreshing: false });\n      this.props.errorHandler(e, 'get-feed-next-page', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    return this.setState((prevState) => {\n      const activities = prevState.activities.merge(\n        this.responseToActivityMap(response),\n      );\n      const activityIdToPath = {\n        ...prevState.activityIdToPath,\n        ...this.responseToActivityIdToPath(response),\n      };\n      return {\n        activityOrder: prevState.activityOrder.concat(\n          response.results.map((a) => a.id),\n        ),\n        activities,\n        activityIdToPath,\n        activityIdToPaths: this.responseToActivityIdToPaths(\n          response,\n          prevState.activityIdToPaths,\n        ),\n        reactionIdToPaths: this.feedResponseToReactionIdToPaths(\n          response,\n          prevState.reactionIdToPaths,\n        ),\n        reactionActivities: {\n          ...prevState.reactionActivities,\n          ...this.responseToReactionActivities(response),\n        },\n        refreshing: false,\n        lastResponse: response,\n      };\n    });\n  };\n\n  loadReverseNextPage = async () => {\n    const { lastReverseResponse } = this.state;\n    if (!lastReverseResponse || !lastReverseResponse.next) {\n      return;\n    }\n    let cancel = false;\n    await this.setState((prevState) => {\n      if (prevState.refreshing) {\n        cancel = true;\n        return {};\n      }\n      return { refreshing: true };\n    });\n\n    if (cancel) {\n      return;\n    }\n\n    const nextURL = new URL(lastReverseResponse.next, true);\n    const options = this.getOptions(nextURL.query);\n\n    let response: FR;\n    try {\n      response = await this.doFeedRequest(options);\n    } catch (e) {\n      this.setState({ refreshing: false });\n      this.props.errorHandler(e, 'get-feed-next-page', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    return this.setState((prevState) => {\n      const activities = prevState.activities.merge(\n        this.responseToActivityMap(response),\n      );\n      const activityIdToPath = {\n        ...prevState.activityIdToPath,\n        ...this.responseToActivityIdToPath(response),\n      };\n      return {\n        activityOrder: response.results\n          .map((a) => a.id)\n          .concat(prevState.activityOrder),\n        activities,\n        activityIdToPath,\n        activityIdToPaths: this.responseToActivityIdToPaths(\n          response,\n          prevState.activityIdToPaths,\n        ),\n        reactionIdToPaths: this.feedResponseToReactionIdToPaths(\n          response,\n          prevState.reactionIdToPaths,\n        ),\n        reactionActivities: {\n          ...prevState.reactionActivities,\n          ...this.responseToReactionActivities(response),\n        },\n        refreshing: false,\n        lastReverseResponse: response,\n      };\n    });\n  };\n\n  loadNextReactions = async (\n    activityId: string,\n    kind: string,\n    activityPath?: ?Array<string>,\n    oldestToNewest?: boolean,\n  ) => {\n    let options: ReactionFilterOptions = {\n      activity_id: activityId,\n      kind,\n    };\n\n    let orderPrefix = 'latest';\n    if (oldestToNewest) {\n      orderPrefix = 'oldest';\n    }\n\n    if (!activityPath) {\n      activityPath = this.getActivityPath(activityId);\n    }\n    const latestReactionsPath = [\n      ...activityPath,\n      orderPrefix + '_reactions',\n      kind,\n    ];\n    const nextUrlPath = [\n      ...activityPath,\n      orderPrefix + '_reactions_extra',\n      kind,\n      'next',\n    ];\n    const refreshingPath = [\n      ...activityPath,\n      orderPrefix + '_reactions_extra',\n      kind,\n      'refreshing',\n    ];\n\n    const reactions_extra = this.state.activities.getIn([\n      ...activityPath,\n      orderPrefix + '_reactions_extra',\n    ]);\n    let nextUrl = 'https://api.stream-io-api.com/';\n    if (reactions_extra) {\n      nextUrl = reactions_extra.getIn([kind, 'next'], '');\n    } else if (oldestToNewest) {\n      // If it's the first request and oldest to newest make sure\n      // order is reversed by this trick with a non existant id.\n      options.id_gt = 'non-existant-' + generateRandomId();\n    }\n\n    const refreshing = this.state.activities.getIn(refreshingPath, false);\n\n    if (!nextUrl || refreshing) {\n      return;\n    }\n\n    this.setState((prevState) => ({\n      activities: prevState.activities.setIn(refreshingPath, true),\n    }));\n\n    options = {\n      ...URL(nextUrl, true).query,\n      ...options,\n    };\n\n    let response;\n    try {\n      if (this.props.doReactionsFilterRequest) {\n        response = await this.props.doReactionsFilterRequest(options);\n      } else {\n        response = await this.props.client.reactions.filter(options);\n      }\n    } catch (e) {\n      this.setState({ refreshing: false });\n      this.props.errorHandler(e, 'get-reactions-next-page', {\n        options,\n      });\n      return;\n    }\n    this.setState((prevState) => ({\n      activities: prevState.activities\n        .setIn(refreshingPath, false)\n        .setIn(nextUrlPath, response.next)\n        .updateIn(latestReactionsPath, (v = immutable.List()) =>\n          v.concat(immutable.fromJS(response.results)),\n        ),\n      reactionIdToPaths: this.reactionResponseToReactionIdToPaths(\n        response,\n        prevState.reactionIdToPaths,\n        latestReactionsPath,\n        prevState.activities.getIn(latestReactionsPath, immutable.List()).toJS()\n          .length,\n      ),\n    }));\n  };\n\n  refreshUnreadUnseen = async () => {\n    let response: FR;\n    try {\n      response = await this.doFeedRequest({ limit: 0 });\n    } catch (e) {\n      this.props.errorHandler(e, 'get-notification-counts', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    return this.setState(this.unseenUnreadFromResponse(response));\n  };\n}\n","// @flow\n\nimport type { FlowRequestTypes } from './types';\nimport stream from 'getstream';\nexport const handleError = (\n  error: Error,\n  type: FlowRequestTypes,\n  detail: Object,\n) => {\n  console.warn(error);\n  alert(getErrorMessage(error, type, detail));\n};\n\nexport const getErrorMessage = (\n  error: Error,\n  type: FlowRequestTypes,\n  detail: Object,\n): string => {\n  console.warn(error);\n  if (!(error instanceof stream.errors.StreamApiError)) {\n    return fallbackErrorMessage(error, type, detail);\n  }\n  const response = error.response;\n\n  if (!response.statusCode || !response.body || !response.body.detail) {\n    return fallbackErrorMessage(error, type, detail);\n  }\n  const statusCode = response.statusCode;\n  const text = response.body.detail;\n\n  /* eslint-disable no-magic-numbers */\n  if (statusCode >= 400 && statusCode < 500) {\n    return text;\n  } else if (statusCode >= 500 && statusCode < 600) {\n    return text;\n  }\n  /* eslint-enable no-magic-numbers */\n\n  return fallbackErrorMessage(error, type, detail);\n};\n\nexport const fallbackErrorMessage = (\n  error: Error,\n  type: FlowRequestTypes,\n  detail: Object,\n): string => {\n  let text = 'Something went wrong';\n  let suffix = '';\n  switch (type) {\n    case 'get-user-info':\n      text += ' when loading user info';\n      break;\n    case 'get-feed':\n      text += ' when loading the feed';\n      break;\n    case 'get-feed-next-page':\n      text += ' when loading the next page of the feed';\n      break;\n    case 'get-notification-counts':\n      text += ' when loading your unread notification counts';\n      break;\n    case 'upload-image':\n      text += ' when uploading your image';\n      suffix = ' If it is, the image is probably too big';\n      break;\n    case 'add-activity':\n      text += ' when submitting your post';\n      break;\n    case ('add-reaction', 'add-child-reaction'):\n      text += ' when submitting your ' + detail.kind;\n      break;\n    case ('delete-reaction', 'delete-child-reaction'):\n      text += ' when removing your ' + detail.kind;\n      break;\n    default:\n  }\n\n  text += '. Is your internet working?' + suffix;\n  return text;\n};\n","// @flow\n\nimport * as React from 'react';\nimport stream from 'getstream';\n\nimport StreamAnalytics from 'stream-analytics';\nimport type { StreamClient, StreamUser } from 'getstream';\n\nimport type { ErrorHandler } from '../types';\n\nimport { FeedManager } from './FeedManager';\nimport type { FeedProps } from './Feed';\nimport { handleError } from '../errors';\n\nexport const StreamContext = React.createContext({\n  changedUserData: () => {},\n  sharedFeedManagers: {},\n});\n\nexport type AppCtx<UserData> = {|\n  client: StreamClient<UserData>,\n  user: StreamUser<UserData>,\n  // We cannot simply take userData from user.data, since the reference to user\n  // will stay the same all the time. Because of this react won't notice that\n  // the internal fields changed so it thinks it doesn't need to rerender.\n  userData: ?UserData,\n  changedUserData: () => void,\n  changeNotificationCounts?: any,\n  analyticsClient?: any,\n  sharedFeedManagers: { [string]: FeedManager },\n  errorHandler: ErrorHandler,\n|};\n\ntype StreamAppProps<UserData> = {|\n  /** The ID of your app, can be found on the [Stream dashboard](https://getstream.io/dashboard) */\n  appId: string | number,\n  /** The API key for your app, can be found on the [Stream dashboard](https://getstream.io/dashboard) */\n  apiKey: string,\n  /** The access token for the end user that uses your website, how to generate it can be found [here](https://getstream.io/docs/#frontend_setup) */\n  token: string,\n  /** Any options that [`stream.connect()`](https://getstream.io/docs/#setup) accepts */\n  options?: {},\n  analyticsToken?: string,\n  /** Normaly feed state is local to the feed component, such as FlatFeed and\n   * NotificationFeed. This means that changes in one feed don't affect the\n   * other. However in some cases you want the state to be shared in multiple\n   * components. In the case of the NotificationDropdown you need state shared\n   * between the NotificationFeed and the dropdown badge. This prop should be\n   * used in those cases. Each element in the array provided to `sharedFeeds`\n   * will create one globally managed feed. The default of this prop makes sure\n   * that the NotificationDropdown works correctly. If you want need to change\n   * some props on the NotificationDropdown, you should change them here\n   * instead.\n   */\n  sharedFeeds: Array<FeedProps>,\n  /** The data a user should get when no data is present in stream for this user yet */\n  defaultUserData: UserData,\n  /** A callback to handle errors produced by the components. This should\n   * probably hook into your own notification system. */\n  errorHandler: ErrorHandler,\n  children?: React.Node,\n|};\n\ntype StreamAppState<UserData> = AppCtx<UserData>;\n\n/**\n * Manages the connection with Stream. Any components that should talk to\n * Stream should be a child of this component.\n */\nexport class StreamApp extends React.Component<\n  StreamAppProps<Object>,\n  StreamAppState<Object>,\n> {\n  static defaultProps = {\n    sharedFeeds: [\n      {\n        feedGroup: 'notification',\n        notify: true,\n        options: { mark_seen: true },\n      },\n    ],\n    defaultUserData: { name: 'Unknown' },\n    errorHandler: handleError,\n  };\n\n  static Consumer = function StreamAppConsumer(props: {\n    children?: (AppCtx<any>) => ?React.Element<any>,\n  }) {\n    return (\n      <StreamContext.Consumer>\n        {(appCtx) => {\n          if (!props.children || !props.children.length) {\n            return null;\n          }\n          if (!appCtx.client || !appCtx.user) {\n            throw new Error(\n              'This component should be a child of a StreamApp component',\n            );\n          }\n          const Child = props.children;\n          return Child(appCtx);\n        }}\n      </StreamContext.Consumer>\n    );\n  };\n\n  constructor(props: StreamAppProps<Object>) {\n    super(props);\n\n    this.state = StreamApp.initClientState(props, {\n      changedUserData: () => {\n        this.setState({ userData: this.state.user.data });\n      },\n    });\n  }\n\n  componentDidUpdate(prevProps: StreamAppProps<Object>) {\n    if (\n      this.props.apiKey !== prevProps.apiKey ||\n      this.props.token !== prevProps.token ||\n      this.props.appId !== prevProps.appId\n    ) {\n      this.getUserInfo();\n    }\n  }\n\n  componentDidMount() {\n    this.getUserInfo();\n  }\n\n  static getDerivedStateFromProps(\n    props: StreamAppProps<Object>,\n    state: StreamAppState<Object>,\n  ) {\n    if (\n      state.client.apiKey !== props.apiKey ||\n      state.client.userToken !== props.token ||\n      state.client.appId !== props.appId\n    ) {\n      return StreamApp.initClientState(props, state);\n    }\n    return null;\n  }\n\n  static initClientState = function(\n    props: StreamAppProps<Object>,\n    state: Object,\n  ) {\n    const client: StreamClient<Object> = stream.connect(\n      props.apiKey,\n      props.token,\n      props.appId,\n      props.options || {},\n    );\n\n    let analyticsClient;\n    if (props.analyticsToken) {\n      analyticsClient = new StreamAnalytics({\n        apiKey: props.apiKey,\n        token: props.analyticsToken,\n      });\n      analyticsClient.setUser(client.userId);\n    }\n\n    const newState = {\n      ...state,\n      client,\n      user: client.currentUser,\n      userData: client.currentUser.data,\n      analyticsClient,\n      sharedFeedManagers: {},\n      errorHandler: props.errorHandler,\n      apiKey: props.apiKey,\n      token: props.token,\n      appId: props.appId,\n    };\n\n    for (const feedProps of props.sharedFeeds) {\n      const manager = new FeedManager({\n        ...feedProps,\n        ...newState,\n      });\n      newState.sharedFeedManagers[manager.feed().id] = manager;\n    }\n\n    return newState;\n  };\n\n  getUserInfo = async () => {\n    try {\n      await this.state.user.getOrCreate(this.props.defaultUserData);\n    } catch (e) {\n      this.props.errorHandler(e, 'get-user-info', {\n        userId: this.state.user.id,\n      });\n      return;\n    }\n    this.state.changedUserData();\n  };\n\n  render() {\n    return (\n      <StreamContext.Provider value={{ ...this.state }}>\n        <React.Fragment>\n          {this.props.children || (\n            <React.Fragment>\n              <div\n                style={{\n                  width: 100 + '%',\n                  height: 100 + '%',\n                  minHeight: 400,\n                  display: 'flex',\n                  flexDirection: 'column',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  color: '#fff',\n                  backgroundColor: '#008AFF',\n                  fontFamily:\n                    '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol',\n                }}\n              >\n                <h3>You are connected to:</h3>\n                <svg width=\"117\" height=\"21\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <g fill=\"none\" fillRule=\"evenodd\">\n                    <path\n                      className=\"stream\"\n                      d=\"M48.812 16.9c.168-.15.317-.317.448-.504.13-.187.196-.401.196-.644 0-.299-.107-.55-.322-.756a2.794 2.794 0 0 0-.784-.518 4.892 4.892 0 0 0-.966-.322c-.336-.075-.616-.14-.84-.196a13.04 13.04 0 0 1-1.736-.546 5.849 5.849 0 0 1-1.414-.784 3.53 3.53 0 0 1-.952-1.092c-.233-.42-.35-.92-.35-1.498 0-.541.13-1.05.392-1.526a4.35 4.35 0 0 1 1.05-1.26 5.156 5.156 0 0 1 1.54-.868 5.387 5.387 0 0 1 1.862-.322c.579 0 1.13.084 1.652.252.523.168.994.397 1.414.686.42.29.775.64 1.064 1.05.29.41.48.868.574 1.372l-2.436.588a2.036 2.036 0 0 0-.728-1.12c-.373-.299-.887-.448-1.54-.448a2.69 2.69 0 0 0-.7.098 2.41 2.41 0 0 0-.672.294c-.205.13-.378.29-.518.476-.14.187-.21.401-.21.644 0 .261.08.485.238.672.159.187.35.34.574.462.224.121.467.22.728.294.261.075.504.14.728.196.99.243 1.81.504 2.464.784.653.28 1.176.588 1.568.924.392.336.667.705.826 1.106.159.401.238.854.238 1.358a3.6 3.6 0 0 1-.406 1.68 4.22 4.22 0 0 1-1.12 1.358 5.304 5.304 0 0 1-1.708.896 6.912 6.912 0 0 1-2.142.322c-1.157 0-2.189-.285-3.094-.854-.905-.57-1.517-1.33-1.834-2.282l2.296-1.036c.299.653.681 1.097 1.148 1.33.467.233.999.35 1.596.35.747 0 1.372-.205 1.876-.616zm12.276 2.772a9.115 9.115 0 0 1-2.268.476c-.747.056-1.419-.051-2.016-.322-.597-.27-1.083-.747-1.456-1.428-.373-.681-.56-1.638-.56-2.87V9.313h-2.226V6.356h.609c.727 0 1.376-.177 1.834-.916.194-.313.22-.633.243-1.502V2.913h2.332v3.443h2.749v2.957h-2.75l-.075 6.635c0 .448.051.803.154 1.064.103.261.275.457.518.588.243.13.56.196.952.196.392 0 .868-.037 1.428-.112l.532 1.988zM69.676 8.78l-.392-.168a5.38 5.38 0 0 0-.392-.112 1.957 1.957 0 0 0-.476-.056c-.541 0-1.045.089-1.512.266a3.849 3.849 0 0 0-1.204.714 3.372 3.372 0 0 0-.798 1.05 2.866 2.866 0 0 0-.294 1.274L64.58 20h-2.716V6.288h2.156l.56 1.484a4.134 4.134 0 0 1 1.47-1.302c.607-.327 1.367-.49 2.282-.49.597 0 1.279.084 2.044.252l-.7 2.548zm7.048 11.256c-.97 0-1.88-.182-2.73-.546a7.032 7.032 0 0 1-2.226-1.498 6.99 6.99 0 0 1-1.498-2.24 6.957 6.957 0 0 1-.546-2.744c0-.97.173-1.885.518-2.744a7.226 7.226 0 0 1 1.4-2.24A6.526 6.526 0 0 1 73.7 6.526a5.91 5.91 0 0 1 2.52-.546c.915 0 1.76.159 2.534.476A5.203 5.203 0 0 1 80.77 7.94c.57.672 1.013 1.526 1.33 2.562.317 1.036.476 2.273.476 3.71h-9.968c.13.485.336.938.616 1.358.28.42.611.784.994 1.092.383.308.812.546 1.288.714.476.168.975.252 1.498.252.71 0 1.367-.13 1.974-.392a4.925 4.925 0 0 0 1.554-1.036l1.68 1.68c-.653.653-1.451 1.176-2.394 1.568-.943.392-1.974.588-3.094.588zM76.22 8.444c-.43 0-.835.084-1.218.252a3.89 3.89 0 0 0-1.064.7 4.32 4.32 0 0 0-.84 1.064c-.233.41-.406.859-.518 1.344h7.084a4.331 4.331 0 0 0-.308-1.288 3.311 3.311 0 0 0-1.75-1.806c-.401-.177-.863-.266-1.386-.266zm20.9-2.156V20h-2.296l-.42-1.84a4.424 4.424 0 0 1-1.792 1.4 5.49 5.49 0 0 1-2.212.476 6.326 6.326 0 0 1-2.618-.546 6.712 6.712 0 0 1-2.128-1.498 7.162 7.162 0 0 1-1.442-2.24 7.116 7.116 0 0 1-.532-2.744c0-.97.177-1.885.532-2.744a7.162 7.162 0 0 1 1.442-2.24 6.712 6.712 0 0 1 2.128-1.498A6.326 6.326 0 0 1 90.4 5.98c.747 0 1.465.145 2.156.434.69.29 1.307.742 1.848 1.358l.42-1.484h2.296zm-6.72 11.34c.541 0 1.055-.121 1.54-.364a3.94 3.94 0 0 0 1.26-.994c.355-.42.635-.91.84-1.47.205-.56.308-1.157.308-1.792s-.103-1.232-.308-1.792a4.834 4.834 0 0 0-.84-1.47 3.94 3.94 0 0 0-1.26-.994 3.398 3.398 0 0 0-1.54-.364c-.541 0-1.055.121-1.54.364a3.94 3.94 0 0 0-1.26.994c-.355.42-.635.91-.84 1.47a5.164 5.164 0 0 0-.308 1.792c0 .635.103 1.232.308 1.792.205.56.485 1.05.84 1.47.355.42.775.751 1.26.994s.999.364 1.54.364zM101.808 20h-2.716V6.288h2.156l.56 1.148a5.135 5.135 0 0 1 1.204-1.022c.467-.29 1.036-.434 1.708-.434.261 0 .555.033.882.098.327.065.663.177 1.008.336a4.3 4.3 0 0 1 .994.644c.317.27.588.62.812 1.05.317-.579.798-1.078 1.442-1.498.644-.42 1.33-.63 2.058-.63.485 0 .999.075 1.54.224.541.15 1.045.43 1.512.84.467.41.85.98 1.148 1.708.299.728.448 1.67.448 2.828V20h-2.548v-8.448c0-1.157-.238-1.965-.714-2.422-.476-.457-1.106-.686-1.89-.686-.597 0-1.12.252-1.568.756-.448.504-.672 1.297-.672 2.38V20h-2.548v-8.448c0-1.157-.238-1.965-.714-2.422-.476-.457-1.106-.686-1.89-.686-.56 0-1.05.215-1.47.644-.42.43-.667 1.101-.742 2.016V20z\"\n                      fill=\"#fff\"\n                    />\n                    <path\n                      className=\"stream-mark\"\n                      d=\"M26.15 6.428l12.802-.908a1 1 0 0 1 .883 1.581L30.88 19.576a1 1 0 0 1-.812.417H9.982a1 1 0 0 1-.811-.416L.19 7.102a1 1 0 0 1 .882-1.582l12.764.908L19.29.333a1 1 0 0 1 1.496.006l5.364 6.09zm2.68 11.587l-8.309-3.105v3.105h8.31zm-9.309 0V14.91l-8.309 3.105h8.31zm-.959-3.847l-8.489 3.17-6.246-8.682 14.735 5.512zm2.9 0l8.49 3.17 6.246-8.682-14.735 5.512zm-1.933-.724V2.994l-6.941 7.837 6.941 2.613zm.992 0V2.996l6.942 7.835-6.942 2.613zm-9.969-3.336l1.597-1.794-7.802-.56 6.205 2.354zm18.863 0l-1.597-1.794 7.803-.56-6.206 2.354z\"\n                      fill=\"#fff\"\n                    />\n                  </g>\n                </svg>\n              </div>\n            </React.Fragment>\n          )}\n        </React.Fragment>\n      </StreamContext.Provider>\n    );\n  }\n}\n","// @flow\n\nimport * as React from 'react';\nimport _isEqual from 'lodash/isEqual';\n\nimport type { FeedRequestOptions, FeedResponse } from 'getstream';\nimport type {\n  BaseActivityResponse,\n  BaseActivityGroupResponse,\n  BaseAppCtx,\n  BaseClient,\n  BaseReaction,\n  ToggleReactionCallbackFunction,\n  AddReactionCallbackFunction,\n  RemoveReactionCallbackFunction,\n  ToggleChildReactionCallbackFunction,\n  AddChildReactionCallbackFunction,\n  RemoveChildReactionCallbackFunction,\n} from '../types';\nimport type { AppCtx } from './StreamApp';\nimport { StreamApp } from './StreamApp';\nimport { FeedManager } from './FeedManager';\n\nexport const FeedContext = React.createContext({});\n\nexport type FeedCtx = {|\n  feedGroup: string,\n  userId?: string,\n  activityOrder: Array<string>,\n  activities: any,\n  unread: number,\n  unseen: number,\n  refresh: (extraOptions?: FeedRequestOptions) => Promise<mixed>,\n  refreshUnreadUnseen: () => Promise<mixed>,\n  loadNextReactions: (\n    activityId: string,\n    kind: string,\n    activityPath?: ?Array<string>,\n    oldestToNewest?: boolean,\n  ) => Promise<mixed>,\n  loadNextPage: () => Promise<mixed>,\n  hasNextPage: boolean,\n  loadReverseNextPage: () => Promise<mixed>,\n  hasReverseNextPage: boolean,\n  refreshing: boolean,\n  hasDoneRequest: boolean,\n  realtimeAdds: Array<{}>,\n  realtimeDeletes: Array<{}>,\n  onToggleReaction: ToggleReactionCallbackFunction,\n  onAddReaction: AddReactionCallbackFunction,\n  onRemoveReaction: RemoveReactionCallbackFunction,\n  onToggleChildReaction: ToggleChildReactionCallbackFunction,\n  onAddChildReaction: AddChildReactionCallbackFunction,\n  onRemoveChildReaction: RemoveChildReactionCallbackFunction,\n  onRemoveActivity: (activityId: string) => Promise<mixed>,\n  onMarkAsRead: (\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => Promise<mixed>,\n  onMarkAsSeen: (\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => Promise<mixed>,\n  getActivityPath: (\n    activity: BaseActivityResponse | string,\n    ...Array<string>\n  ) => Array<string>,\n|};\n\nexport type FeedProps = {|\n  /** The feed group part of the feed */\n  feedGroup: string,\n  /** The user_id part of the feed */\n  userId?: string,\n  /** Read options for the API client (eg. limit, ranking, ...) */\n  options?: FeedRequestOptions,\n  /** If true, feed shows the Notifier component when new activities are added */\n  notify?: boolean,\n  /** The feed read handler (change only for advanced/complex use-cases) */\n  doFeedRequest?: (\n    client: BaseClient,\n    feedGroup: string,\n    userId?: string,\n    options?: FeedRequestOptions,\n  ) => Promise<FeedResponse<{}, {}>>,\n  /** Override activity delete request */\n  doActivityDeleteRequest?: (id: string) => mixed,\n  /* Components to display in the feed */\n  children?: React.Node,\n  /** Override reaction add request */\n  doReactionAddRequest?: (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override reaction delete request */\n  doReactionDeleteRequest?: (id: string) => mixed,\n  /** Override child reaction add request */\n  doChildReactionAddRequest?: (\n    kind: string,\n    activity: BaseReaction,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override child reaction delete request */\n  doChildReactionDeleteRequest?: (id: string) => mixed,\n  /** Override reactions filter request */\n  doReactionsFilterRequest?: (options: {}) => Promise<Object>,\n  /** The location that should be used for analytics when liking in the feed,\n   * this is only useful when you have analytics enabled for your app. */\n  analyticsLocation?: string,\n|};\n\nexport class Feed extends React.Component<FeedProps> {\n  // Used to avoid unmount-remount behaviour, which causes\n  // unsubscribe-subscribe behaviour.\n  _appCtxWrapperFunc = (appCtx: AppCtx<any>) => (\n    <FeedInner {...this.props} {...appCtx} />\n  );\n\n  render() {\n    return <StreamApp.Consumer>{this._appCtxWrapperFunc}</StreamApp.Consumer>;\n  }\n}\n\nexport type FeedInnerProps = {| ...FeedProps, ...BaseAppCtx |};\n\ntype FeedState = {|\n  manager: FeedManager,\n|};\n\nclass FeedInner extends React.Component<FeedInnerProps, FeedState> {\n  constructor(props: FeedInnerProps) {\n    super(props);\n    const feedId = props.client.feed(props.feedGroup, props.userId).id;\n    let manager = props.sharedFeedManagers[feedId];\n    if (!manager) {\n      manager = new FeedManager(props);\n    }\n\n    this.state = {\n      manager,\n    };\n  }\n  boundForceUpdate = () => this.forceUpdate();\n\n  componentDidMount() {\n    return this.state.manager.register(this.boundForceUpdate);\n  }\n\n  componentDidUpdate(prevProps) {\n    const clientDifferent = this.props.client !== prevProps.client;\n    const notifyDifferent = this.props.notify !== prevProps.notify;\n    const feedDifferent =\n      this.props.userId !== prevProps.userId ||\n      this.props.feedGroup !== prevProps.feedGroup;\n    const optionsDifferent = !_isEqual(this.props.options, prevProps.options);\n    const doFeedRequestDifferent =\n      this.props.doFeedRequest !== prevProps.doFeedRequest;\n\n    if (\n      clientDifferent ||\n      feedDifferent ||\n      optionsDifferent ||\n      doFeedRequestDifferent\n    ) {\n      // TODO: Implement\n    }\n    if (clientDifferent || feedDifferent || notifyDifferent) {\n      // TODO: Implement\n    }\n  }\n\n  componentWillUnmount() {\n    return this.state.manager.unregister(this.boundForceUpdate);\n  }\n\n  getCtx = () => {\n    const { manager } = this.state;\n    const state = manager.state;\n    return {\n      getActivityPath: manager.getActivityPath,\n      onToggleReaction: manager.onToggleReaction,\n      onAddReaction: manager.onAddReaction,\n      onRemoveReaction: manager.onRemoveReaction,\n      onToggleChildReaction: manager.onToggleChildReaction,\n      onAddChildReaction: manager.onAddChildReaction,\n      onRemoveChildReaction: manager.onRemoveChildReaction,\n      onRemoveActivity: manager.onRemoveActivity,\n      onMarkAsRead: manager.onMarkAsRead,\n      onMarkAsSeen: manager.onMarkAsSeen,\n      hasDoneRequest: state.lastResponse != null,\n      refresh: manager.refresh,\n      refreshUnreadUnseen: manager.refreshUnreadUnseen,\n      loadNextReactions: manager.loadNextReactions,\n      loadNextPage: manager.loadNextPage,\n      hasNextPage: manager.hasNextPage(),\n      loadReverseNextPage: manager.loadReverseNextPage,\n      hasReverseNextPage: manager.hasReverseNextPage(),\n      feedGroup: this.props.feedGroup,\n      userId: this.props.userId,\n      activityOrder: state.activityOrder,\n      activities: state.activities,\n      realtimeAdds: state.realtimeAdds,\n      realtimeDeletes: state.realtimeDeletes,\n      refreshing: state.refreshing,\n      unread: state.unread,\n      unseen: state.unseen,\n    };\n  };\n\n  render() {\n    return (\n      <FeedContext.Provider value={this.getCtx()}>\n        {this.props.children}\n      </FeedContext.Provider>\n    );\n  }\n}\n","export default \"1519fc1dc6e473ee.png\"","// @flow\nimport React from 'react';\nimport placeholder from '../images/placeholder.png';\n\nexport type Props = {|\n  size?: number,\n  image?: string,\n  alt?: string,\n  rounded?: boolean,\n  circle?: boolean,\n  onClick?: (e: SyntheticEvent<>) => mixed,\n|};\n\n/**\n *\n * @example ./examples/Avatar.md\n */\nexport default class Avatar extends React.PureComponent<Props> {\n  render() {\n    const { size, image, alt, rounded, circle } = this.props;\n    return (\n      <React.Fragment>\n        <img\n          style={size ? { width: `${size}px`, height: `${size}px` } : {}}\n          className={`raf-avatar ${rounded ? 'raf-avatar--rounded' : ''} ${\n            circle ? 'raf-avatar--circle' : ''\n          }`}\n          onClick={this.props.onClick}\n          src={image ? image : placeholder}\n          alt={alt || ''}\n        />\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { humanizeTimestamp } from '../utils';\nimport Avatar from './Avatar';\n\nimport type { Renderable } from '../types';\n\nimport { smartRender } from '../utils';\n\nexport type Props = {|\n  username: ?string,\n  avatar?: string,\n  subtitle?: string,\n  time?: string, // text that should be displayed as the time\n  timestamp?: string | number, // a timestamp that should be humanized\n  icon?: string,\n  onClickUser?: () => mixed,\n  follow?: boolean,\n  Right?: Renderable,\n  AfterUsername?: React.Node,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/UserBar.md\n */\nexport default class UserBar extends React.Component<Props> {\n  render() {\n    let time = this.props.time;\n    if (time === undefined && this.props.timestamp != null) {\n      time = humanizeTimestamp(this.props.timestamp);\n    }\n    return (\n      <div className=\"raf-user-bar\">\n        {this.props.avatar ? (\n          <Avatar\n            onClick={this.props.onClickUser}\n            size={50}\n            circle\n            image={this.props.avatar}\n          />\n        ) : null}\n        <div className=\"raf-user-bar__details\">\n          <p\n            className=\"raf-user-bar__username\"\n            onClick={this.props.onClickUser}\n          >\n            {this.props.username}\n          </p>\n          {this.props.AfterUsername}\n          {this.props.icon !== undefined ? (\n            <img src={this.props.icon} alt=\"icon\" />\n          ) : null}\n          {this.props.subtitle ? (\n            <p className=\"raf-user-bar__subtitle\">\n              <time\n                dateTime={this.props.timestamp}\n                title={this.props.timestamp}\n              >\n                {this.props.subtitle}\n              </time>\n            </p>\n          ) : null}\n        </div>\n        <React.Fragment>\n          {smartRender(this.props.Right, {}, () => (\n            <p className=\"raf-user-bar__extra\">\n              <time\n                dateTime={this.props.timestamp}\n                title={this.props.timestamp}\n              >\n                {time}\n              </time>\n            </p>\n          ))}\n        </React.Fragment>\n      </div>\n    );\n  }\n}\n","// @flow\n\nimport React from 'react';\nimport placeholder from '../images/placeholder.png';\nimport { IconButton } from 'react-file-utils';\nimport { sanitizeURL } from '../utils';\n\nexport type Props = {|\n  image?: ?string,\n  images?: Array<{ image: string }>,\n  alt?: ?string,\n  title?: ?string,\n  url?: string,\n  nolink?: boolean,\n  description?: ?string,\n  handleClose?: (e: SyntheticEvent<>) => mixed,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/Card.md\n */\nexport default class Card extends React.Component<Props> {\n  trimUrl = (url: string) => {\n    let trimmedUrl;\n    if (url !== undefined || url !== null) {\n      trimmedUrl = url\n        .replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '')\n        .split('/')[0];\n    }\n    return trimmedUrl;\n  };\n\n  _handleClose = (e: SyntheticEvent<>) => {\n    if (this.props.handleClose) {\n      this.props.handleClose(e);\n    }\n  };\n\n  render() {\n    const { alt, images, handleClose, nolink } = this.props;\n    let image = this.props.image;\n    if (!image && images && images.length) {\n      image = images[0].image;\n    }\n    const url = sanitizeURL(this.props.url);\n    const svg =\n      '<svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\" id=\"b\"/><filter x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\" filterUnits=\"objectBoundingBox\" id=\"a\"><feOffset in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"/><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\" in=\"shadowBlurOuter1\"/></filter></defs><g transform=\"translate(-451 -1)\" fill-rule=\"nonzero\" fill=\"none\"><use fill=\"#000\" filter=\"url(#a)\" xlink:href=\"#b\"/><use fill=\"#FFF\" fill-rule=\"evenodd\" xlink:href=\"#b\"/></g></svg>';\n    return (\n      <a\n        href={!nolink ? url : null}\n        target=\"blank\"\n        rel=\"noopener\"\n        className={`raf-card ${\n          image !== undefined ? 'raf-card--with-image' : ''\n        }`}\n      >\n        {handleClose && image ? (\n          <IconButton onClick={(e) => this._handleClose(e)}>\n            <div dangerouslySetInnerHTML={{ __html: svg }} />\n          </IconButton>\n        ) : null}\n        {image !== undefined && (\n          <div className=\"raf-card__image\">\n            <img\n              src={image == null ? placeholder : image}\n              alt={alt || this.props.title || this.props.description || ''}\n            />\n          </div>\n        )}\n        <div className=\"raf-card__content\">\n          <div className=\"raf-card__content-left\">\n            <p className=\"raf-card__title\">{this.props.title}</p>\n            <p className=\"raf-card__url\">{this.trimUrl(url || '')}</p>\n            <p className=\"raf-card__description\">{this.props.description}</p>\n          </div>\n          {handleClose && image === undefined ? (\n            <div className=\"raf-card__content-right\">\n              <IconButton onClick={(e) => this._handleClose(e)}>\n                <div dangerouslySetInnerHTML={{ __html: svg }} />\n              </IconButton>\n            </div>\n          ) : null}\n        </div>\n      </a>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { IconButton } from 'react-file-utils';\nimport { sanitizeURL } from '../utils';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faPlayCircle,\n  faPauseCircle,\n} from '@fortawesome/free-regular-svg-icons';\n\nimport type { OgData } from '../types';\n\ntype Props = {|\n  og: OgData,\n  handleClose?: (e: SyntheticEvent<>) => mixed,\n|};\n\ntype State = {|\n  open: boolean,\n  playing: boolean,\n  progress: number,\n  updateProgress?: IntervalID | null,\n|};\n\nexport default class Audio extends React.Component<Props, State> {\n  audioRef: { current: HTMLAudioElement | null };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      open: false,\n      playing: false,\n      progress: 0,\n      updateProgress: null,\n    };\n    this.audioRef = React.createRef();\n  }\n\n  playAudio = () => {\n    if (this.audioRef.current !== null) {\n      this.audioRef.current.pause();\n      this.updateProgress();\n      this.setState({\n        playing: true,\n        updateProgress: setInterval(this.updateProgress, 500),\n      });\n      //$FlowFixMe\n      this.audioRef.current.play();\n    }\n  };\n\n  pauseAudio = () => {\n    if (this.audioRef.current !== null) {\n      this.audioRef.current.pause();\n    }\n    this.setState({ playing: false });\n    window.clearInterval(this.state.updateProgress);\n  };\n\n  updateProgress = () => {\n    if (this.audioRef.current !== null) {\n      const position = this.audioRef.current.currentTime;\n      const duration = this.audioRef.current.duration;\n      const progress = (100 / duration) * position;\n      this.setState({\n        progress,\n      });\n      if (position === duration) {\n        this.pauseAudio();\n      }\n    }\n  };\n\n  componentWillUnmount() {\n    window.clearInterval(this.state.updateProgress);\n  }\n\n  _handleClose = (e: SyntheticEvent<>) => {\n    if (this.props.handleClose) {\n      this.props.handleClose(e);\n    }\n  };\n\n  render() {\n    const { og } = this.props;\n    const svg =\n      '<svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\" id=\"b\"/><filter x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\" filterUnits=\"objectBoundingBox\" id=\"a\"><feOffset in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"/><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\" in=\"shadowBlurOuter1\"/></filter></defs><g transform=\"translate(-451 -1)\" fill-rule=\"nonzero\" fill=\"none\"><use fill=\"#000\" filter=\"url(#a)\" xlink:href=\"#b\"/><use fill=\"#FFF\" fill-rule=\"evenodd\" xlink:href=\"#b\"/></g></svg>';\n    const audio = og.audios[0];\n    const url = sanitizeURL(audio.secure_url || audio.audio);\n    const image = ((og.images || [])[0] || {}).image;\n    return (\n      <div className=\"raf-audio\">\n        <div className=\"raf-audio__wrapper\">\n          <audio ref={this.audioRef}>\n            <source\n              src={url}\n              type={\n                audio.type === 'audio/vnd.facebook.bridge'\n                  ? 'audio/mp3'\n                  : 'audio/mp3'\n              }\n            />\n          </audio>\n          <div className=\"raf-audio__image\">\n            <div className=\"raf-audio__image--overlay\">\n              {!this.state.playing ? (\n                <div\n                  onClick={() => this.playAudio()}\n                  className=\"raf-audio__image--button\"\n                >\n                  <FontAwesomeIcon icon={faPlayCircle} />\n                </div>\n              ) : (\n                <div\n                  onClick={() => this.pauseAudio()}\n                  className=\"raf-audio__image--button\"\n                >\n                  <FontAwesomeIcon icon={faPauseCircle} />\n                </div>\n              )}\n            </div>\n            <img src={image} alt={`${og.description}`} />\n          </div>\n          <div className=\"raf-audio__content\">\n            <span className=\"raf-audio__content--title\">\n              <strong>{og.title}</strong>\n            </span>\n            <span className=\"raf-audio__content--subtitle\">\n              {og.description}\n            </span>\n            <div className=\"raf-audio__content--progress\">\n              <div style={{ width: `${this.state.progress}%` }} />\n            </div>\n          </div>\n          {this.props.handleClose ? (\n            <IconButton onClick={(e) => this._handleClose(e)}>\n              <div dangerouslySetInnerHTML={{ __html: svg }} />\n            </IconButton>\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { IconButton } from 'react-file-utils';\nimport type { OgData } from '../types';\nimport { sanitizeURL } from '../utils';\nimport URL from 'url-parse';\n\ntype Props = {|\n  og: OgData,\n  handleClose?: (e: SyntheticEvent<>) => mixed,\n  urlsThatAreGifs: Array<string>,\n|};\n\n/**\n * Component for rendering an Youtube or Vimeo embedded player\n * @example ./examples/Video.md\n */\nexport default class Video extends React.Component<Props> {\n  static defaultProps = {\n    urlsThatAreGifs: ['i.giphy.com', 'i.imgur.com', 'media.giphy.com'],\n  };\n  _handleClose = (e: SyntheticEvent<>) => {\n    if (this.props.handleClose) {\n      this.props.handleClose(e);\n    }\n  };\n\n  render() {\n    const { videos, images = [] } = this.props.og;\n    let video: {\n      video?: string,\n      secure_url?: string,\n      type?: string,\n      width?: string,\n      height?: string,\n    } = {};\n\n    const svg =\n      '<svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\" id=\"b\"/><filter x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\" filterUnits=\"objectBoundingBox\" id=\"a\"><feOffset in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"/><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\" in=\"shadowBlurOuter1\"/></filter></defs><g transform=\"translate(-451 -1)\" fill-rule=\"nonzero\" fill=\"none\"><use fill=\"#000\" filter=\"url(#a)\" xlink:href=\"#b\"/><use fill=\"#FFF\" fill-rule=\"evenodd\" xlink:href=\"#b\"/></g></svg>';\n    const CloseButton = Boolean(this.props.handleClose) && (\n      <IconButton onClick={(e) => this._handleClose(e)}>\n        <div dangerouslySetInnerHTML={{ __html: svg }} />\n      </IconButton>\n    );\n\n    for (let i = 0; i < videos.length; i++) {\n      if (videos[i].type === 'text/html' || videos[i].type === 'video/mp4') {\n        video = videos[i];\n        break;\n      }\n    }\n    const url = sanitizeURL(video.secure_url || video.video);\n\n    if (video.type === 'text/html') {\n      return (\n        <div className=\"raf-video__frame\">\n          {CloseButton}\n          <iframe\n            title={'embedded player'}\n            id=\"ytplayer\"\n            type={video.type}\n            width={video.width}\n            height={video.height}\n            src={url}\n            frameBorder=\"0\"\n          />\n        </div>\n      );\n    } else {\n      let videoProps = {\n        controls: true,\n        // Try fetching length of video etc\n        preload: 'metadata',\n        poster: '',\n      };\n\n      if (images[0]) {\n        if (images[0].secure_url) videoProps.poster = images[0].secure_url;\n        else if (images[0].image) videoProps.poster = images[0].image;\n      }\n\n      const parsedUrl = new URL(url);\n\n      for (const gifUrl of this.props.urlsThatAreGifs) {\n        if (gifUrl === parsedUrl.host) {\n          videoProps = {\n            // Load the video right away\n            preload: 'auto',\n            // Display it like it's a gif\n            autoPlay: true,\n            muted: true,\n            loop: true,\n            controls: false,\n            // On mobile don't open video fullscreen\n            playsInline: true,\n            'webkit-playsinline': 'webkit-playsinline',\n          };\n\n          break;\n        }\n      }\n\n      return (\n        <div className=\"raf-video__video\">\n          <video className=\"raf-video__video--video\" {...videoProps}>\n            <source src={url} type={video.type} />\n          </video>\n          <div className=\"raf-video__video--content\">\n            <div className=\"raf-video__video--title\">{this.props.og.title}</div>\n            <div className=\"raf-video__video--description\">\n              {this.props.og.description}\n            </div>\n            <div className=\"raf-video__video--link\">\n              <a href={sanitizeURL(this.props.og.url)} target=\"blank\">\n                {this.props.og.site_name}\n              </a>\n            </div>\n          </div>\n          {CloseButton}\n        </div>\n      );\n    }\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport Lightbox from 'react-images';\n\nexport type Props = {|\n  images: string[],\n|};\nexport type State = {|\n  lightboxIsOpen: boolean,\n  currentImage: number,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/Gallery.md\n */\nexport default class Gallery extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      lightboxIsOpen: false,\n      currentImage: 0,\n    };\n  }\n\n  gotoPrevious = () => {\n    this.setState({\n      currentImage: this.state.currentImage - 1,\n    });\n  };\n  gotoNext = () => {\n    this.setState({\n      currentImage: this.state.currentImage + 1,\n    });\n  };\n  openLightbox = (image?: number) => {\n    this.setState({\n      lightboxIsOpen: true,\n      currentImage: image,\n    });\n  };\n\n  closeLightbox = () => {\n    this.setState({\n      lightboxIsOpen: false,\n      currentImage: 0,\n    });\n  };\n\n  getImages = (images: any) =>\n    images.map((item) => ({\n      src: item,\n    }));\n\n  //  TODO: Provide way to add alt tags.\n  render() {\n    const { images } = this.props;\n\n    return (\n      <React.Fragment>\n        <div className=\"raf-gallery\">\n          {images.slice(0, 5).map((image, i) => (\n            <div\n              className={`img ${\n                i === 4 && images.length > 5 ? 'img--last' : ''\n              }`}\n              onClick={() => this.openLightbox(i)}\n              key={`image-${i}`}\n            >\n              <img src={image} className={`raf-gallery__image `} alt=\"\" />\n              <React.Fragment>\n                {i === 4 && images.length > 5 ? (\n                  <p>{images.length - 4} more</p>\n                ) : null}\n              </React.Fragment>\n            </div>\n            // </div>\n          ))}\n\n          <Lightbox\n            backdropClosesModal\n            images={this.getImages(images)}\n            isOpen={this.state.lightboxIsOpen}\n            onClickPrev={this.gotoPrevious}\n            onClickNext={this.gotoNext}\n            onClose={this.closeLightbox}\n            currentImage={this.state.currentImage}\n          />\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\n\nimport React from 'react';\n\nimport UserBar from './UserBar';\nimport Card from './Card';\nimport Audio from './Audio';\nimport Video from './Video';\nimport { FileIcon } from 'react-file-utils';\nimport Gallery from './Gallery';\n\nimport type { ActivityData, Renderable } from '../types';\nimport {\n  smartRender,\n  sanitizeURL,\n  humanizeTimestamp,\n  userOrDefault,\n  textRenderer,\n} from '../utils';\n\ntype Props = {\n  Header?: Renderable,\n  Content?: Renderable,\n  Footer?: Renderable,\n  HeaderRight?: Renderable,\n  onPress?: () => mixed,\n  onClickUser?: (?any) => mixed,\n  sub?: string,\n  icon?: string,\n  activity: ActivityData,\n  /** Handler for any routing you may do on clicks on Hashtags */\n  onClickHashtag?: (word: string) => mixed,\n  /** Handler for any routing you may do on clicks on Mentions */\n  onClickMention?: (word: string) => mixed,\n};\n\n/**\n * Component is described here.\n *\n * @example ./examples/Activity.md\n */\nexport default class Activity extends React.Component<Props> {\n  _getOnClickUser() {\n    return this.props.onClickUser ? this.onClickUser : undefined;\n  }\n\n  renderHeader = () => {\n    const actor = userOrDefault(this.props.activity.actor);\n\n    return (\n      <div style={{ padding: '8px 16px' }}>\n        <UserBar\n          username={actor.data.name}\n          avatar={actor.data.profileImage}\n          onClickUser={this._getOnClickUser()}\n          subtitle={\n            this.props.HeaderRight != null\n              ? humanizeTimestamp(this.props.activity.time)\n              : undefined\n          }\n          timestamp={this.props.activity.time}\n          icon={this.props.icon}\n          Right={this.props.HeaderRight}\n        />\n      </div>\n    );\n  };\n\n  onClickUser = () => {\n    const { onClickUser } = this.props;\n    if (onClickUser) {\n      return onClickUser(userOrDefault(this.props.activity.actor));\n    }\n  };\n\n  renderContent = () => {\n    let { text } = this.props.activity;\n\n    if (text === undefined) {\n      if (typeof this.props.activity.object === 'string') {\n        text = this.props.activity.object;\n      } else {\n        text = '';\n      }\n    }\n    text = text.trim();\n    const { attachments = {} } = this.props.activity;\n\n    return (\n      <div className=\"raf-activity__content\">\n        {!!text && (\n          <div style={{ padding: '8px 16px' }}>\n            <p>\n              {textRenderer(\n                text,\n                'raf-activity',\n                this.props.onClickMention,\n                this.props.onClickHashtag,\n              )}\n            </p>\n          </div>\n        )}\n\n        {this.props.activity.verb === 'repost' &&\n          this.props.activity.object instanceof Object && (\n            <Card {...this.props.activity.object.data} />\n          )}\n\n        {attachments &&\n          attachments.og &&\n          Object.keys(attachments.og).length > 0 && (\n            <div style={{ padding: '8px 16px' }}>\n              {attachments.og.videos ? (\n                <Video og={attachments.og} />\n              ) : attachments.og.audios ? (\n                <Audio og={attachments.og} />\n              ) : (\n                <Card {...attachments.og} />\n              )}\n            </div>\n          )}\n\n        {Boolean(this.props.activity.image) &&\n        this.props.activity.image !== undefined ? (\n          <div style={{ padding: '8px 0' }}>\n            <Gallery\n              images={[this.props.activity.image]}\n              // resizeMethod=\"resize\"\n            />\n          </div>\n        ) : null}\n\n        {attachments.images && Boolean(attachments.images.length) && (\n          <div style={{ padding: '8px 0' }}>\n            <Gallery images={attachments.images} />\n          </div>\n        )}\n\n        {attachments.files && Boolean(attachments.files.length) && (\n          <ol className=\"raf-activity__attachments\">\n            {attachments.files.map(({ name, url, mimeType }, i) => (\n              <a href={sanitizeURL(url)} download key={i}>\n                <li className=\"raf-activity__file\">\n                  <FileIcon mimeType={mimeType} filename={name} /> {name}\n                </li>\n              </a>\n            ))}\n          </ol>\n        )}\n      </div>\n    );\n  };\n\n  renderFooter = () => null;\n\n  render() {\n    return (\n      <div className=\"raf-activity\">\n        <React.Fragment>\n          {smartRender(this.props.Header, {}, this.renderHeader)}\n          {smartRender(this.props.Content, {}, this.renderContent)}\n          {smartRender(this.props.Footer, {}, this.renderFooter)}\n        </React.Fragment>\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nexport type Props = {|\n  children: React.Node,\n  to?: string,\n  onClick?: (SyntheticEvent<>) => mixed,\n|};\n\n/**\n *\n * @example ./examples/Link.md\n */\nexport default class Link extends React.Component<Props> {\n  render() {\n    return (\n      <React.Fragment>\n        <a\n          href={this.props.to}\n          className=\"raf-link\"\n          onClick={this.props.onClick}\n        >\n          {this.props.children}\n        </a>\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\n\nimport React from 'react';\nimport Link from './Link';\n\nexport type Props = {|\n  adds: Array<{}>,\n  deletes: Array<{}>,\n  labelSingle?: string,\n  labelPlural?: string,\n  /** A function that returns either the string to display or null in case no\n   * notification should be displayed */\n  labelFunction?: ({\n    count: number,\n    deleteCount: number,\n    addCount: number,\n    labelPlural?: string,\n    labelSingle?: string,\n  }) => string | null,\n  onClick?: () => mixed,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/NewActivitiesNotification.md\n */\nexport default class NewActivitiesNotification extends React.Component<Props> {\n  static defaultProps = {\n    labelSingle: 'notification',\n    labelPlural: 'notifications',\n    adds: [],\n    deletes: [],\n  };\n\n  _labelFunction = () => {\n    const {\n      adds,\n      deletes,\n      labelSingle,\n      labelPlural,\n      labelFunction,\n    } = this.props;\n    const addCount = (adds || []).length;\n    const deleteCount = (deletes || []).length;\n    const count = addCount + deleteCount;\n    if (labelFunction) {\n      return labelFunction({\n        count,\n        addCount,\n        deleteCount,\n        labelSingle,\n        labelPlural,\n      });\n    }\n    if (addCount === 0) {\n      return null;\n    }\n    return `You have ${addCount} new ${(addCount > 1\n      ? labelPlural\n      : labelSingle) || ''}`;\n  };\n  render() {\n    const label = this._labelFunction();\n    if (label === null) {\n      return null;\n    }\n\n    return (\n      <button\n        className=\"raf-new-activities-notification\"\n        type=\"button\"\n        onClick={this.props.onClick}\n      >\n        <Link>{label}</Link>\n      </button>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { LoadingIndicator } from 'react-file-utils';\n\nexport type Props = {|\n  children: React.Node,\n  buttonStyle: string,\n  type: 'button' | 'submit' | 'reset',\n  onClick?: (SyntheticEvent<HTMLButtonElement>) => mixed,\n  onKeyPress?: (SyntheticEvent<HTMLButtonElement>) => mixed,\n  disabled: boolean,\n  loading: boolean,\n|};\n\n/**\n *\n * @example ./examples/Button.md\n */\nexport default class Button extends React.Component<Props> {\n  static defaultProps = {\n    buttonStyle: 'info',\n    type: 'button',\n    disabled: false,\n    loading: false,\n  };\n\n  render() {\n    const { children, buttonStyle } = this.props;\n    return (\n      <button\n        className={`raf-button${\n          buttonStyle ? ' raf-button--' + buttonStyle : ''\n        }`}\n        onClick={this.props.onClick}\n        onKeyPress={this.props.onKeyPress}\n        type={this.props.type}\n        disabled={this.props.disabled}\n      >\n        {!this.props.loading ? (\n          children\n        ) : (\n          <LoadingIndicator\n            backgroundColor=\"rgba(255,255,255,0.1)\"\n            color=\"rgba(255,255,255,0.4)\"\n          />\n        )}\n      </button>\n    );\n  }\n}\n","//@flow\nimport * as React from 'react';\n\nimport Button from './Button';\n\ntype Props = {|\n  onClick: () => mixed,\n  refreshing: boolean,\n  children: React.Node,\n|};\n\nexport default class LoadMoreButton extends React.Component<Props> {\n  static defaultProps = {\n    children: 'Load more',\n  };\n\n  render() {\n    return (\n      <div className=\"raf-load-more-button\">\n        <Button\n          onClick={this.props.onClick}\n          buttonStyle=\"info\"\n          disabled={this.props.refreshing}\n          loading={this.props.refreshing}\n        >\n          {this.props.children}\n        </Button>\n      </div>\n    );\n  }\n}\n","//@flow\nimport * as React from 'react';\nimport LoadMoreButton from './LoadMoreButton';\nimport { smartRender } from '../utils';\n\nimport type { Renderable } from '../types';\ntype Props = {|\n  /** The button the user should click to click to load more */\n  LoadMoreButton: Renderable,\n  /** callback to load the next page */\n  loadNextPage: () => mixed,\n  /** indicates if there is a next page to load */\n  hasNextPage: boolean,\n  /** indicates if there there's currently any refreshing taking place */\n  refreshing: boolean,\n  /** display the items in opposite order */\n  reverse: boolean,\n  /** The paginated content to display */\n  children: React.Node,\n|};\n\nexport default class LoadMorePaginator extends React.Component<Props> {\n  static defaultProps = {\n    LoadMoreButton,\n  };\n  render() {\n    return (\n      <React.Fragment>\n        {!this.props.reverse && this.props.children}\n        {this.props.hasNextPage\n          ? smartRender(this.props.LoadMoreButton, {\n              refreshing: this.props.refreshing,\n              onClick: this.props.loadNextPage,\n            })\n          : null}\n        {this.props.reverse && this.props.children}\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\n\ntype Props = {|\n  text: string,\n|};\nexport default class FeedPlaceholder extends React.Component<Props> {\n  static defaultProps = {\n    text: 'No data to display...',\n  };\n\n  render() {\n    return (\n      <div className=\"raf-feed-placeholder\">\n        <p>{this.props.text}</p>\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nimport Activity from './Activity';\nimport NewActivitiesNotification from './NewActivitiesNotification';\nimport type { Props as NotifierProps } from './NewActivitiesNotification';\nimport LoadMorePaginator from './LoadMorePaginator';\nimport FeedPlaceholder from './FeedPlaceholder';\nimport { LoadingIndicator } from 'react-file-utils';\n\nimport { Feed, FeedContext } from '../Context';\nimport { smartRender } from '../utils';\n\nimport type {\n  BaseFeedCtx,\n  BaseClient,\n  Renderable,\n  BaseActivityResponse,\n  BaseReaction,\n} from '../types';\nimport type {\n  FeedRequestOptions,\n  FeedResponse,\n  ActivityResponse,\n} from 'getstream';\n\ntype Props = {|\n  /** The feed group part of the feed that should be displayed */\n  feedGroup: string,\n  /** The user_id part of the feed that should be displayed */\n  userId?: string,\n  /** Read options for the API client (eg. limit, ranking, ...) */\n  options?: FeedRequestOptions,\n  /** The component used to render an activity in the feed */\n  Activity: Renderable,\n  /** The component to use to render new activities notification */\n  Notifier: Renderable,\n  /** By default pagination is done with a \"Load more\" button, you can use\n   * InifiniteScrollPaginator to enable infinite scrolling */\n  Paginator: Renderable,\n  /** Component to show when there are no activities in the feed **/\n  Placeholder: Renderable,\n  /** If true, feed shows the Notifier component when new activities are added */\n  notify: boolean,\n  /** The feed read handler (change only for advanced/complex use-cases) */\n  doFeedRequest?: (\n    client: BaseClient,\n    feedGroup: string,\n    userId?: string,\n    options?: FeedRequestOptions,\n  ) => Promise<FeedResponse<{}, {}>>,\n  /** Override activity delete request */\n  doActivityDeleteRequest?: (id: string) => mixed,\n  /** Override reaction add request */\n  doReactionAddRequest?: (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override reaction delete request */\n  doReactionDeleteRequest?: (id: string) => mixed,\n  /** Override child reaction add request */\n  doChildReactionAddRequest?: (\n    kind: string,\n    activity: BaseReaction,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override child reaction delete request */\n  doChildReactionDeleteRequest?: (id: string) => mixed,\n  /** Override reactions filter request */\n  doReactionsFilterRequest?: (options: {}) => Promise<Object>,\n  /** The location that should be used for analytics when liking in the feed,\n   * this is only useful when you have analytics enabled for your app. */\n  analyticsLocation?: string,\n|};\n\n/**\n * Renders a feed of activities, this component is a StreamApp consumer\n * and must always be a child of the `<StreamApp>` element\n * @example ./examples/FlatFeed.md\n */\nexport default class FlatFeed extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'timeline',\n    notify: false,\n    Activity,\n    Notifier: (props: NotifierProps) => (\n      <NewActivitiesNotification\n        labelPlural=\"activities\"\n        labelSingle=\"activity\"\n        {...props}\n      />\n    ),\n    Placeholder: FeedPlaceholder,\n    Paginator: LoadMorePaginator,\n  };\n\n  render() {\n    return (\n      <Feed\n        feedGroup={this.props.feedGroup}\n        userId={this.props.userId}\n        options={this.props.options}\n        notify={this.props.notify}\n        doFeedRequest={this.props.doFeedRequest}\n        doActivityDeleteRequest={this.props.doActivityDeleteRequest}\n        doReactionAddRequest={this.props.doReactionAddRequest}\n        doReactionDeleteRequest={this.props.doReactionDeleteRequest}\n        doChildReactionAddRequest={this.props.doChildReactionAddRequest}\n        doChildReactionDeleteRequest={this.props.doChildReactionDeleteRequest}\n        doReactionsFilterRequest={this.props.doReactionsFilterRequest}\n      >\n        <FeedContext.Consumer>\n          {(feedCtx) => <FlatFeedInner {...this.props} {...feedCtx} />}\n        </FeedContext.Consumer>\n      </Feed>\n    );\n  }\n}\n\ntype PropsInner = {| ...Props, ...BaseFeedCtx |};\nclass FlatFeedInner extends React.Component<PropsInner> {\n  listRef = React.createRef();\n  _refresh = async () => {\n    await this.props.refresh(this.props.options);\n    const ref = this.listRef;\n    if (ref && ref.current) {\n      ref.current.scrollToOffset({ offset: 0 });\n    }\n  };\n  async componentDidMount() {\n    await this._refresh();\n  }\n\n  _renderWrappedActivity = ({ item }: { item: any }) => (\n    <ImmutableItemWrapper\n      renderItem={this._renderActivity}\n      item={item}\n      feedGroup={this.props.feedGroup}\n      userId={this.props.userId}\n      key={item.get('id')}\n    />\n  );\n\n  _childProps = () => ({\n    onToggleReaction: this.props.onToggleReaction,\n    onAddReaction: this.props.onAddReaction,\n    onRemoveReaction: this.props.onRemoveReaction,\n    onToggleChildReaction: this.props.onToggleChildReaction,\n    onAddChildReaction: this.props.onAddChildReaction,\n    onRemoveChildReaction: this.props.onRemoveChildReaction,\n    onRemoveActivity: this.props.onRemoveActivity,\n    feedGroup: this.props.feedGroup,\n    userId: this.props.userId,\n  });\n\n  _renderActivity = (item: ActivityResponse<Object, Object>) => {\n    const args = {\n      activity: item,\n      ...this._childProps(),\n    };\n\n    return smartRender(this.props.Activity, { ...args });\n  };\n\n  render() {\n    const notifierProps: NotifierProps = {\n      adds: this.props.realtimeAdds,\n      deletes: this.props.realtimeDeletes,\n      onClick: this._refresh,\n    };\n    const {\n      loadNextPage,\n      hasNextPage,\n      refreshing,\n      hasDoneRequest,\n      loadReverseNextPage,\n      hasReverseNextPage,\n    } = this.props;\n    if (hasReverseNextPage) {\n      notifierProps.onClick = loadReverseNextPage;\n      notifierProps.labelFunction = () => 'Load activities';\n    }\n\n    if (this.props.activities.size === 0 && this.props.hasDoneRequest) {\n      return (\n        <React.Fragment>\n          {smartRender(this.props.Notifier, notifierProps)}\n          {smartRender(this.props.Placeholder)}\n        </React.Fragment>\n      );\n    }\n\n    if (refreshing && !hasDoneRequest) {\n      return (\n        <div style={{ padding: 40, backgroundColor: 'rgb(247, 247, 247' }}>\n          <LoadingIndicator />\n        </div>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        {smartRender(this.props.Notifier, notifierProps)}\n        {smartRender(this.props.Paginator, {\n          loadNextPage,\n          hasNextPage,\n          refreshing,\n          children: this.props.activityOrder.map((id) =>\n            this._renderWrappedActivity({\n              item: this.props.activities.get(id),\n            }),\n          ),\n        })}\n      </React.Fragment>\n    );\n  }\n}\n\ntype ImmutableItemWrapperProps = {\n  renderItem: (item: any) => any,\n  item: any,\n};\n\nclass ImmutableItemWrapper extends React.PureComponent<ImmutableItemWrapperProps> {\n  render() {\n    return this.props.renderItem(this.props.item.toJS());\n  }\n}\n","// @flow\nimport React from 'react';\nimport Avatar from './Avatar';\nimport type { UserResponse } from '../types';\nimport { userOrDefault } from '../utils';\n\nexport type Props = {|\n  /* The list of users to display */\n  users: UserResponse[],\n  /* The size of the avatar in px */\n  avatarSize: number,\n  /* The limit of avatars to display */\n  limit: number,\n  /* Callback to call when clicking on a user in the notification */\n  onClickUser?: (UserResponse) => mixed,\n|};\n/**\n * Component is described here.\n *\n * @example ./examples/AvatarGroup.md\n */\nexport default class AvatarGroup extends React.Component<Props> {\n  static defaultProps = {\n    avatarSize: 30,\n    limit: 5,\n  };\n\n  _getOnClickUser(user: UserResponse) {\n    return this.props.onClickUser\n      ? (e: SyntheticEvent<>) => this.onClickUser(e, user)\n      : undefined;\n  }\n\n  onClickUser = (e: SyntheticEvent<>, user: UserResponse) => {\n    const { onClickUser } = this.props;\n    if (onClickUser) {\n      e.stopPropagation();\n      return onClickUser(userOrDefault(user));\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"raf-avatar-group\">\n        {this.props.users &&\n          this.props.users.slice(0, this.props.limit).map((user, i) => (\n            <div className=\"raf-avatar-group__avatar\" key={`avatar-${i}`}>\n              <Avatar\n                onClick={this._getOnClickUser(user)}\n                image={user && user.data.profileImage}\n                size={this.props.avatarSize}\n                circle\n              />\n            </div>\n          ))}\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { userOrDefault } from '../utils';\nimport type { ActivityData } from '../types';\n\nimport { Thumbnail } from 'react-file-utils';\n\ntype Props = {|\n  activity: ActivityData,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/AttachedActivity.md\n */\nexport default class AttachedActivity extends React.Component<Props> {\n  render() {\n    const { activity } = this.props;\n    const images =\n      activity.attachments !== undefined &&\n      activity.attachments.images !== undefined\n        ? activity.attachments.images\n        : [];\n    const actor = userOrDefault(activity.actor);\n\n    if (\n      activity.verb === 'repost' ||\n      activity.verb === 'post' ||\n      activity.verb === 'comment'\n    ) {\n      return (\n        <div className=\"raf-attached-activity\">\n          {images.length === 0 && (\n            <React.Fragment>\n              <p className=\"raf-attached-activity__author\">\n                <strong>{actor.data.name}</strong>\n              </p>\n              <p className=\"raf-attached-activity__content\">\n                {activity.object}\n              </p>\n            </React.Fragment>\n          )}\n          {images.length > 0 && (\n            <div className=\"raf-attached-activity__images\">\n              {images.slice(0, 5).map((image, i) => (\n                <Thumbnail image={image} size={50} key={`image-${i}`} />\n              ))}\n            </div>\n          )}\n        </div>\n      );\n    }\n\n    return null;\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { IconButton } from 'react-file-utils';\n\nexport type Props = {|\n  children?: React.Node,\n|};\n\nexport type State = {|\n  open: boolean,\n|};\n\n/**\n * Simple wrapper for a small dropdown.\n *\n * @example ./examples/Dropdown.md\n */\nexport default class Dropdown extends React.Component<Props, State> {\n  dropdownBox: { current: null | HTMLDivElement };\n\n  constructor(props: Props) {\n    super(props);\n    this.showMenu = this.showMenu.bind(this);\n    this.hideMenu = this.hideMenu.bind(this);\n    this.dropdownBox = React.createRef();\n\n    this.state = {\n      open: false,\n    };\n  }\n\n  componentWillUnmount() {\n    // $FlowFixMe\n    document.removeEventListener('click', this.hideMenu);\n  }\n  // $FlowFixMe\n  hideMenu = (e) => {\n    // $FlowFixMe\n    if (!this.dropdownBox.current.contains(e.target)) {\n      this.setState({ open: false }, () => {\n        document.removeEventListener('click', this.hideMenu);\n      });\n    }\n  };\n\n  // $FlowFixMe\n  showMenu = (e) => {\n    e.stopPropagation();\n\n    this.setState({ open: true }, () => {\n      document.addEventListener('click', this.hideMenu);\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"raf-dropdown\">\n        <IconButton onClick={this.showMenu}>\n          <svg\n            className=\"raf-dropdown__button\"\n            width=\"12\"\n            height=\"8\"\n            viewBox=\"0 0 12 8\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M1.41 0L6 4.77 10.59 0 12 1.469l-6 6.25-6-6.25z\"\n              fill=\"#A0B2B8\"\n              fillRule=\"evenodd\"\n            />\n          </svg>\n        </IconButton>\n\n        {this.state.open && (\n          <div className=\"raf-dropdown__box\" ref={this.dropdownBox}>\n            {this.props.children}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport Avatar from './Avatar';\nimport AvatarGroup from './AvatarGroup';\nimport AttachedActivity from './AttachedActivity';\nimport Dropdown from './Dropdown';\nimport Link from './Link';\n\nimport { humanizeTimestamp, userOrDefault } from '../utils';\nimport type { UserResponse, BaseActivityGroupResponse } from '../types';\n\ntype Props = {\n  /* The activity group to display in this notification */\n  activityGroup: any,\n  /* Callback to call when clicking on a notification */\n  onClickNotification?: (activityGroup: BaseActivityGroupResponse) => mixed,\n  /* Callback to call when clicking on a user in the notification */\n  onClickUser?: (UserResponse) => mixed,\n  /* Callback to mark a notification as read, if not supplied the dropdown used\n   * to mark as read will not be shown */\n  onMarkAsRead?: ?(\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => Promise<mixed>,\n};\n\n/**\n * Component is described here.\n *\n * @example ./examples/Notification.md\n */\nexport default class Notification extends React.Component<Props> {\n  getUsers = (activities: any) =>\n    activities.map((item) => userOrDefault(item.actor));\n\n  _getOnClickUser(actor: UserResponse) {\n    return this.props.onClickUser\n      ? (e: SyntheticEvent<>) => this.onClickUser(e, actor)\n      : undefined;\n  }\n\n  onClickUser = (e: SyntheticEvent<>, actor: any) => {\n    const { onClickUser } = this.props;\n    if (onClickUser) {\n      e.stopPropagation();\n      return onClickUser(userOrDefault(actor));\n    }\n  };\n\n  _getOnClickNotification() {\n    return this.props.onClickNotification\n      ? this.onClickNotification\n      : undefined;\n  }\n\n  onClickNotification = (e: SyntheticEvent<>) => {\n    const { onClickNotification } = this.props;\n    if (onClickNotification) {\n      e.stopPropagation();\n      return onClickNotification(this.props.activityGroup);\n    }\n  };\n\n  render() {\n    let headerText, headerSubtext;\n    const { activityGroup, onMarkAsRead } = this.props;\n    const activities = activityGroup.activities;\n    const latestActivity = activities[0];\n    const lastActor = userOrDefault(latestActivity.actor);\n\n    if (activities.length === 1) {\n      headerText = lastActor.data.name;\n    } else if (activities.length > 1 && activities.length < 1 + 1 + 1) {\n      headerText = `${lastActor.data.name || 'Unknown'} and 1 other `;\n    } else {\n      headerText = `${lastActor.data.name ||\n        'Unknown'} and ${activities.length - 1} others `;\n    }\n\n    if (typeof latestActivity.object === 'string') {\n      return null;\n    }\n\n    if (latestActivity.verb === 'like') {\n      headerSubtext = 'liked';\n      headerSubtext += ` your ${latestActivity.object.verb}`;\n      // icon = HeartIcon;\n    } else if (latestActivity.verb === 'repost') {\n      headerSubtext = `reposted`;\n      headerSubtext += ` your ${latestActivity.object.verb}`;\n      // icon = RepostIcon;\n    } else if (latestActivity.verb === 'follow') {\n      headerSubtext = `followed`;\n      headerSubtext += ` you`;\n      // icon = RepostIcon;\n    } else if (latestActivity.verb === 'comment') {\n      headerSubtext = `commented`;\n      headerSubtext += ` on your ${latestActivity.object.verb}`;\n      // icon = RepostIcon;\n    } else {\n      console.warn(\n        'No notification styling found for your verb, please create your own custom Notification group.',\n      );\n      return null;\n    }\n\n    return (\n      <div\n        onClick={this._getOnClickNotification()}\n        className={\n          'raf-notification' +\n          (activityGroup.is_read ? ' raf-notification--read' : '')\n        }\n      >\n        <Avatar\n          onClick={this._getOnClickUser(lastActor)}\n          image={lastActor.data.profileImage}\n          circle\n          size={30}\n        />\n        <div className=\"raf-notification__content\">\n          <div className=\"raf-notification__header\">\n            <strong>{headerText}</strong> {headerSubtext}\n            {!activityGroup.is_read && onMarkAsRead && (\n              <Dropdown>\n                <div>\n                  <Link\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onMarkAsRead(activityGroup);\n                    }}\n                  >\n                    Mark&nbsp;as&nbsp;read\n                  </Link>\n                </div>\n              </Dropdown>\n            )}\n          </div>\n          <div>\n            <small>{humanizeTimestamp(latestActivity.time)}</small>\n          </div>\n          {latestActivity.verb !== 'follow' ? (\n            <AttachedActivity activity={latestActivity.object} />\n          ) : null}\n        </div>\n        <div className=\"raf-notification__extra\">\n          {activities.length > 1 && latestActivity.verb === 'follow' ? (\n            <AvatarGroup\n              onClickUser={this.props.onClickUser}\n              avatarSize={30}\n              users={this.getUsers(activities.slice(1, activities.length))}\n            />\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nimport { Feed, FeedContext } from '../Context';\nimport NewActivitiesNotification from './NewActivitiesNotification';\nimport LoadMorePaginator from './LoadMorePaginator';\nimport Notification from './Notification';\nimport { LoadingIndicator } from 'react-file-utils';\nimport FeedPlaceholder from './FeedPlaceholder';\n\nimport { smartRender } from '../utils';\n\nimport type {\n  BaseActivityResponse,\n  BaseFeedCtx,\n  BaseClient,\n  Renderable,\n  BaseReaction,\n} from '../types';\nimport type { FeedRequestOptions, FeedResponse } from 'getstream';\n\ntype Props = {|\n  /** The feed group part of the feed that should be displayed */\n  feedGroup: string,\n  /** The user_id part of the feed that should be displayed */\n  userId?: string,\n  /** read options for the API client (eg. limit, mark_seen, ...) */\n  options?: FeedRequestOptions,\n  /** the component used to render a group in the feed */\n  Group: Renderable,\n  /** if true, feed shows the NewActivitiesNotification component when new activities are added */\n  notify: boolean,\n  /** The component used to render the new activities notification */\n  Notifier: Renderable,\n  /** By default pagination is done with a \"Load more\" button, you can use\n   * InifiniteScrollPaginator to enable infinite scrolling */\n  Paginator: Renderable,\n  /** Component to show when there are no activities in the feed **/\n  Placeholder: Renderable,\n  /** The feed read handler (change only for advanced/complex use-cases) */\n  doFeedRequest?: (\n    client: BaseClient,\n    feedGroup: string,\n    userId?: string,\n    options?: FeedRequestOptions,\n  ) => Promise<FeedResponse<{}, {}>>,\n  /** Override activity delete request */\n  doActivityDeleteRequest?: (id: string) => mixed,\n  /** Override reaction add request */\n  doReactionAddRequest?: (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override reaction delete request */\n  doReactionDeleteRequest?: (id: string) => mixed,\n  /** Override child reaction add request */\n  doChildReactionAddRequest?: (\n    kind: string,\n    activity: BaseReaction,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override child reaction delete request */\n  doChildReactionDeleteRequest?: (id: string) => mixed,\n  /** The location that should be used for analytics when liking in the feed,\n   * this is only useful when you have analytics enabled for your app. */\n  analyticsLocation?: string,\n|};\n\n/**\n * Renders a notificationfeed, this component is a StreamApp consumer and must\n * always be a child of the `<StreamApp>` element.\n * @example ./examples/NotificationFeed.md\n */\nexport default class NotificationFeed extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'notification',\n    Group: Notification,\n    notify: false,\n    Notifier: NewActivitiesNotification,\n    Paginator: LoadMorePaginator,\n    Placeholder: FeedPlaceholder,\n  };\n\n  render() {\n    return (\n      <Feed\n        feedGroup={this.props.feedGroup}\n        userId={this.props.userId}\n        options={makeDefaultOptions(this.props.options)}\n        notify={this.props.notify}\n        doFeedRequest={this.props.doFeedRequest}\n        doActivityDeleteRequest={this.props.doActivityDeleteRequest}\n        doReactionAddRequest={this.props.doReactionAddRequest}\n        doReactionDeleteRequest={this.props.doReactionDeleteRequest}\n        doChildReactionAddRequest={this.props.doChildReactionAddRequest}\n        doChildReactionDeleteRequest={this.props.doChildReactionDeleteRequest}\n      >\n        <FeedContext.Consumer>\n          {(feedCtx) => <NotificationFeedInner {...this.props} {...feedCtx} />}\n        </FeedContext.Consumer>\n      </Feed>\n    );\n  }\n}\n\nconst makeDefaultOptions = (options) => {\n  const copy = { ...options };\n  if (copy.mark_seen === undefined) {\n    copy.mark_seen = true;\n  }\n  return copy;\n};\n\ntype PropsInner = {| ...Props, ...BaseFeedCtx |};\nclass NotificationFeedInner extends React.Component<PropsInner> {\n  listRef = React.createRef();\n  _refresh = async () => {\n    await this.props.refresh(makeDefaultOptions(this.props.options));\n    const ref = this.listRef;\n    if (ref && ref.current) {\n      ref.current.scrollToOffset({ offset: 0 });\n    }\n  };\n  async componentDidMount() {\n    await this._refresh();\n  }\n\n  componentWillUnmount() {\n    this.props.activities.clear();\n    this.props.activityOrder.splice(0, this.props.activityOrder.length);\n  }\n\n  _renderWrappedGroup = ({ item }: { item: any }) => (\n    <ImmutableItemWrapper\n      renderItem={this._renderGroup}\n      item={item}\n      feedGroup={this.props.feedGroup}\n      userId={this.props.userId}\n      key={item.get('id')}\n    />\n  );\n\n  _renderGroup = (item: BaseActivityResponse) => {\n    const args = {\n      activityGroup: item,\n      feedGroup: this.props.feedGroup,\n      userId: this.props.userId,\n      onToggleReaction: this.props.onToggleReaction,\n      onAddReaction: this.props.onAddReaction,\n      onRemoveReaction: this.props.onRemoveReaction,\n      onToggleChildReaction: this.props.onToggleChildReaction,\n      onAddChildReaction: this.props.onAddChildReaction,\n      onRemoveChildReaction: this.props.onRemoveChildReaction,\n      onRemoveActivity: this.props.onRemoveActivity,\n      onMarkAsRead: this.props.onMarkAsRead,\n      onMarkAsSeen: this.props.onMarkAsSeen,\n    };\n    return smartRender(this.props.Group, args);\n  };\n\n  render() {\n    const notifierProps = {\n      adds: this.props.realtimeAdds,\n      deletes: this.props.realtimeDeletes,\n      onClick: this._refresh,\n    };\n    const {\n      loadNextPage,\n      hasNextPage,\n      refreshing,\n      hasDoneRequest,\n    } = this.props;\n\n    if (this.props.activities.size === 0 && hasDoneRequest) {\n      return (\n        <React.Fragment>\n          {smartRender(this.props.Notifier, notifierProps)}\n          {smartRender(this.props.Placeholder)}\n        </React.Fragment>\n      );\n    }\n\n    if (refreshing && !hasDoneRequest) {\n      return (\n        <div style={{ padding: 40, backgroundColor: 'rgb(247, 247, 247' }}>\n          <LoadingIndicator />\n        </div>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        {smartRender(this.props.Notifier, notifierProps)}\n        {smartRender(this.props.Paginator, {\n          loadNextPage,\n          hasNextPage,\n          refreshing,\n          children: this.props.activityOrder.map((id) =>\n            this._renderWrappedGroup({\n              item: this.props.activities.get(id),\n            }),\n          ),\n        })}\n      </React.Fragment>\n    );\n  }\n}\n\ntype ImmutableItemWrapperProps = {\n  renderItem: (item: any) => any,\n  item: any,\n};\n\nclass ImmutableItemWrapper extends React.PureComponent<ImmutableItemWrapperProps> {\n  render() {\n    return this.props.renderItem(this.props.item.toJS());\n  }\n}\n","// @flow\nimport React from 'react';\n\nimport FlatFeed from './FlatFeed';\n\nimport type { FeedRequestOptions } from 'getstream';\nimport type { Renderable, BaseActivityResponse, BaseReaction } from '../types';\n\ntype Props = {|\n  activityId: string,\n  feedGroup: string,\n  userId?: string,\n  options?: FeedRequestOptions,\n  analyticsLocation?: string,\n  Activity?: Renderable,\n  /** Override activity delete request */\n  doActivityDeleteRequest?: (id: string) => mixed,\n  /** Override reaction add request */\n  doReactionAddRequest?: (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override reaction delete request */\n  doReactionDeleteRequest?: (id: string) => mixed,\n  /** Override child reaction add request */\n  doChildReactionAddRequest?: (\n    kind: string,\n    activity: BaseReaction,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override child reaction delete request */\n  doChildReactionDeleteRequest?: (id: string) => mixed,\n  /** Override reactions filter request */\n  doReactionsFilterRequest?: (options: {}) => Promise<Object>,\n|};\n\n/**\n * Shows the detail of a single activity\n * @example ./examples/SinglePost.md\n */\nexport default class SinglePost extends React.Component<Props> {\n  render() {\n    return (\n      <React.Fragment>\n        <FlatFeed\n          feedGroup={this.props.feedGroup}\n          userId={this.props.userId}\n          options={{\n            withRecentReactions: true,\n            ...this.props.options,\n          }}\n          analyticsLocation={this.props.analyticsLocation}\n          Activity={this.props.Activity}\n          doFeedRequest={(client, feedGroup, userId, options) =>\n            client\n              .feed(feedGroup, userId)\n              .getActivityDetail(this.props.activityId, options)\n          }\n          doActivityDeleteRequest={this.props.doActivityDeleteRequest}\n          doReactionAddRequest={this.props.doReactionAddRequest}\n          doReactionDeleteRequest={this.props.doReactionDeleteRequest}\n          doChildReactionAddRequest={this.props.doChildReactionAddRequest}\n          doChildReactionDeleteRequest={this.props.doChildReactionDeleteRequest}\n          doReactionsFilterRequest={this.props.doReactionsFilterRequest}\n        />\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\n\nimport * as React from 'react';\n\ntype PanelStyle = 'rounded' | 'square';\n\nexport type Props = {|\n  panelStyle: PanelStyle,\n  children: React.Node,\n|};\n\n/**\n * Simple Components that renders a panel. To be combined with PanelHeader, PanelContent, PanelFooter. Used by the library to render the B2BActivity and StatusUpdateForm\n *\n * @example ./examples/Panel.md\n */\nexport default class Panel extends React.Component<Props> {\n  static defaultProps = {\n    panelStyle: 'rounded',\n  };\n\n  render() {\n    return (\n      <div className={`raf-panel raf-panel--${this.props.panelStyle}`}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nexport type Props = {|\n  children: React.Node,\n|};\n\nexport default class PanelHeading extends React.Component<Props> {\n  render() {\n    return <div className=\"raf-panel-header\">{this.props.children}</div>;\n  }\n}\n","import React from 'react';\n\nexport default class PanelFooter extends React.Component {\n  render() {\n    return <div className=\"raf-panel-footer\">{this.props.children}</div>;\n  }\n}\n","import React from 'react';\n\nexport default class PanelContent extends React.Component {\n  render() {\n    return <div className=\"raf-panel-content\">{this.props.children}</div>;\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nimport { LoadingIndicator } from 'react-file-utils';\n\nimport { emojiIndex } from 'emoji-mart';\nimport ReactTextareaAutocomplete from '@webscopeio/react-textarea-autocomplete';\nimport type { Trigger, ReactRefObjectOrFunction } from '../types';\n\nimport '@webscopeio/react-textarea-autocomplete/style.css';\n\nexport type Props = {|\n  rows: number,\n  maxLength?: number,\n  placeholder: string,\n  onChange: (event: SyntheticEvent<HTMLTextAreaElement> | Event) => mixed,\n  onPaste: (event: SyntheticClipboardEvent<HTMLTextAreaElement>) => mixed,\n  value?: string,\n  /** A ref that is bound to the textarea element */\n  innerRef?: ReactRefObjectOrFunction<HTMLTextAreaElement>,\n  /** An extra trigger for ReactTextareaAutocomplete, this can be used to show\n   * a menu when typing @xxx or #xxx, in addition to the emoji menu when typing\n   * :xxx  */\n  trigger?: Trigger,\n|};\n\nconst AutocompleteItem = ({ entity: { id, native } }) => (\n  <div>\n    {native} {id}\n  </div>\n);\n\n/**\n * Component is described here.\n *\n * @example ./examples/Textarea.md\n */\nexport default class Textarea extends React.Component<Props> {\n  static defaultProps = {\n    rows: 3,\n    placeholder: 'Share your opinion',\n    trigger: {},\n  };\n\n  render() {\n    const { innerRef, trigger } = this.props;\n    return (\n      <ReactTextareaAutocomplete\n        loadingComponent={LoadingIndicator}\n        trigger={{\n          ':': {\n            dataProvider: (token) => {\n              const emojis = emojiIndex.search(token) || [];\n              return emojis.slice(0, 10);\n            },\n            component: AutocompleteItem,\n            output: (item) => ({\n              key: item.id,\n              text: item.native,\n              caretPosition: 'next',\n            }),\n          },\n          ...trigger,\n        }}\n        innerRef={\n          innerRef &&\n          ((el) => {\n            if (typeof innerRef === 'function') {\n              innerRef(el);\n            } else if (this.props.innerRef != null) {\n              innerRef.current = el;\n            }\n          })\n        }\n        rows={this.props.rows}\n        maxLength={this.props.maxLength}\n        className=\"raf-textarea__textarea\"\n        containerClassName=\"raf-textarea\"\n        dropdownClassName=\"raf-emojisearch\"\n        listClassName=\"raf-emojisearch__list\"\n        itemClassName=\"raf-emojisearch__item\"\n        placeholder={this.props.placeholder}\n        onChange={this.props.onChange}\n        onSelect={this.props.onChange}\n        onPaste={this.props.onPaste}\n        value={this.props.value}\n      />\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { Picker } from 'emoji-mart';\nimport type { Emoji } from '../types';\n\ntype Props = {|\n  onSelect?: (emoji: Emoji) => mixed,\n|};\n\ntype State = {|\n  open: boolean,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/EmojiPicker.md\n */\nexport default class EmojiPicker extends React.Component<Props, State> {\n  emojiPicker = React.createRef();\n  state = {\n    open: false,\n  };\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideMenu);\n  }\n\n  hideMenu = (e: MouseEvent) => {\n    const { current } = this.emojiPicker;\n    if (current && !current.contains(e.target)) {\n      this.setState({ open: false }, () => {\n        document.removeEventListener('click', this.hideMenu);\n      });\n    }\n  };\n\n  showMenu = (e: SyntheticMouseEvent<HTMLElement>) => {\n    e.preventDefault();\n\n    this.setState({ open: true }, () => {\n      document.addEventListener('click', this.hideMenu);\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"raf-emoji-picker\">\n        {' '}\n        {this.state.open && (\n          <div className=\"raf-emoji-picker__container\" ref={this.emojiPicker}>\n            <Picker\n              emoji=\"point_up\"\n              title=\"Pick your emoji\"\n              onSelect={this.props.onSelect}\n            />\n          </div>\n        )}\n        <div\n          role=\"button\"\n          onClick={this.showMenu}\n          className=\"raf-emoji-picker__button\"\n        >\n          <svg\n            width=\"20\"\n            height=\"20\"\n            viewBox=\"0 0 20 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M10 15.498c2.33 0 4.304-1.456 5.106-3.5H4.892c.802 2.044 2.777 3.5 5.107 3.5zm-3.5-6.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm7 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm-3.5 9a8 8 0 0 1-8-8 8 8 0 0 1 8-8 8 8 0 0 1 8 8 8 8 0 0 1-8 8zm-.006-18C4.467-.002 0 4.475 0 9.998s4.468 10 9.995 10c5.526 0 10.005-4.477 10.005-10s-4.479-10-10.005-10z\"\n              fill=\"#A0B2B8\"\n              fillRule=\"nonzero\"\n            />\n          </svg>\n        </div>\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nexport type Props = {|\n  children: React.Node,\n  size: number,\n|};\n/**\n * Component is described here.\n *\n * @example ./examples/Title.md\n */\nexport default class Title extends React.Component<Props> {\n  static defaultProps = {\n    size: 18,\n  };\n  render() {\n    return (\n      <div className=\"raf-title\" style={{ fontSize: this.props.size }}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nimport Panel from './Panel';\nimport PanelHeading from './PanelHeader';\nimport PanelFooter from './PanelFooter';\nimport PanelContent from './PanelContent';\nimport Textarea from './Textarea';\nimport Avatar from './Avatar';\nimport Card from './Card';\nimport Video from './Video';\nimport Audio from './Audio';\nimport EmojiPicker from './EmojiPicker';\nimport {\n  ImageUploadButton,\n  FileUploadButton,\n  ImagePreviewer,\n  FilePreviewer,\n  ImageDropzone,\n  LoadingIndicator,\n} from 'react-file-utils';\nimport Button from './Button';\nimport Title from './Title';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBookmark } from '@fortawesome/free-regular-svg-icons';\nimport _uniq from 'lodash/uniq';\nimport _debounce from 'lodash/debounce';\nimport _difference from 'lodash/difference';\nimport _includes from 'lodash/includes';\nimport anchorme from 'anchorme';\n\nimport { StreamApp } from '../Context';\nimport {\n  generateRandomId,\n  dataTransferItemsToFiles,\n  dataTransferItemsHaveFiles,\n  inputValueFromEvent,\n} from '../utils';\nimport type {\n  BaseAppCtx,\n  BaseActivityResponse,\n  OgData,\n  CustomActivityArgData,\n  ImageUpload,\n  FileUpload,\n  FileLike,\n  Trigger,\n  ReactRefObjectOrFunction,\n} from '../types';\n\nimport type { ActivityArgData } from 'getstream';\n\ntype Props = {|\n  /** The feed group part of the feed that the activity should be posted to */\n  feedGroup: string,\n  /** The user_id part of the feed that the activity should be posted to  */\n  userId?: string,\n  /** The verb that should be used to post the activity */\n  activityVerb: string,\n  /** If you want to change something about the activity data that this form\n   * sends to stream you can do that with this function. This function gets the\n   * activity data that the form would send normally and should return the\n   * modified activity data that should be posted instead.\n   *\n   * For instance, this would add a target field to the activity:\n   *\n   * ```javascript\n   * &lt;StatusUpdateForm\n   *   modifyActivityData={(data) => ({...data, target: 'Group:1'})}\n   * />\n   * ```\n   * */\n  modifyActivityData: (activityData: {}) => ActivityArgData<{}, {}>,\n  /** Add extra footer item */\n  FooterItem?: React.Node,\n  /** A callback to run after the activity is posted successfully */\n  onSuccess?: (response: BaseActivityResponse) => mixed,\n  /** Override Post request */\n  doRequest?: (activityData: {}) => Promise<BaseActivityResponse>,\n  /** An extra trigger for ReactTextareaAutocomplete, this can be used to show\n   * a menu when typing @xxx or #xxx, in addition to the emoji menu when typing\n   * :xxx  */\n  trigger?: Trigger,\n  /** A ref that is bound to the textarea element */\n  innerRef?: ReactRefObjectOrFunction<HTMLTextAreaElement>,\n  /** The header to display */\n  Header: React.Node,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/StatusUpdateForm.md\n */\n\nexport default class StatusUpdateForm extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'user',\n    activityVerb: 'post',\n    modifyActivityData: (d: {}) => d,\n    Header: <Title>New Post</Title>,\n  };\n\n  render() {\n    return (\n      <StreamApp.Consumer>\n        {(appCtx) => <StatusUpdateFormInner {...this.props} {...appCtx} />}\n      </StreamApp.Consumer>\n    );\n  }\n}\n\ntype OgState = {|\n  scrapingActive: boolean,\n  data?: ?OgData,\n  dismissed: boolean,\n|};\n\ntype State = {|\n  text: string,\n  imageUploads: { [string]: ImageUpload },\n  imageOrder: Array<string>,\n  fileUploads: { [string]: FileUpload },\n  fileOrder: Array<string>,\n  ogUrlOrder: string[],\n  ogStateByUrl: { [string]: OgState },\n  ogActiveUrl: ?string,\n  submitting: boolean,\n|};\n\ntype PropsInner = {| ...Props, ...BaseAppCtx |};\nclass StatusUpdateFormInner extends React.Component<PropsInner, State> {\n  _handleOgDebounced: (string) => mixed;\n\n  textInputRef = React.createRef();\n\n  attachTextInputRef = (el) => {\n    this.textInputRef.current = el;\n    if (typeof this.props.innerRef === 'function') {\n      this.props.innerRef(el);\n    } else if (this.props.innerRef != null) {\n      this.props.innerRef.current = el;\n    }\n  };\n\n  state = {\n    text: '',\n    imageUploads: {},\n    imageOrder: [],\n    fileUploads: {},\n    fileOrder: [],\n    ogUrlOrder: [],\n    ogStateByUrl: {},\n    ogActiveUrl: null,\n    submitting: false,\n  };\n\n  constructor(props) {\n    super(props);\n    this._handleOgDebounced = _debounce(this.handleOG, 250, {\n      leading: true,\n      trailing: true,\n    });\n  }\n\n  handleOG(text) {\n    let newUrls;\n    let removedUrls;\n\n    const urlInfos = anchorme(text, {\n      list: true,\n      exclude: (info) =>\n        info.protocol !== 'https://' && info.protocol !== 'http://',\n    });\n    const urls = _uniq(urlInfos.map((info) => info.protocol + info.encoded));\n\n    this.setState(\n      (prevState) => {\n        const oldUrls = prevState.ogUrlOrder;\n        newUrls = _difference(urls, oldUrls);\n        removedUrls = _difference(oldUrls, urls);\n        const newState: $Shape<State> = {\n          ogUrlOrder: urls,\n        };\n\n        if (!_includes(urls, prevState.ogActiveUrl)) {\n          // !urls.includes(prevState.ogActiveUrl) replaced with lodash\n          newState.ogActiveUrl = null;\n          for (const url of urls) {\n            const ogState = prevState.ogStateByUrl[url];\n            if (ogState && ogState.data && !ogState.dismissed) {\n              newState.ogActiveUrl = url;\n              break;\n            }\n          }\n        }\n\n        for (const url of removedUrls) {\n          delete prevState.ogStateByUrl[url];\n        }\n        for (const url of newUrls) {\n          prevState.ogStateByUrl[url] = {\n            scrapingActive: true,\n            dismissed: false,\n          };\n        }\n        newState.ogStateByUrl = prevState.ogStateByUrl;\n        return newState;\n      },\n      () => {\n        newUrls.forEach(async (url) => {\n          let resp;\n          try {\n            resp = await this.props.client.og(url);\n          } catch (e) {\n            console.warn(e);\n            this.setState((prevState) => {\n              prevState.ogStateByUrl[url] = {\n                scrapingActive: false,\n                dismissed: false,\n              };\n              return { ogStateByUrl: prevState.ogStateByUrl };\n            });\n            return;\n          }\n          resp.url = url;\n          this.setState((prevState) => {\n            prevState.ogStateByUrl[url] = {\n              scrapingActive: false,\n              data: resp,\n              dismissed: false,\n            };\n            const newState: $Shape<State> = {\n              ogStateByUrl: prevState.ogStateByUrl,\n            };\n            if (!prevState.ogActiveUrl) {\n              newState.ogActiveUrl = url;\n            }\n\n            return newState;\n          });\n        });\n      },\n    );\n  }\n\n  _dismissOg = (og) => {\n    if (og && og.url != null) {\n      this.setState((prevState) => {\n        const { ogStateByUrl } = prevState;\n        for (const url in ogStateByUrl) {\n          ogStateByUrl[url].dismissed = true;\n        }\n\n        return {\n          ogActiveUrl: null,\n          ogStateByUrl,\n        };\n      });\n    }\n  };\n\n  _text = () => this.state.text.trim();\n\n  _object = () => {\n    for (const image of this._orderedImages()) {\n      if (image.url) {\n        return image.url;\n      }\n    }\n    return this._text();\n  };\n\n  _orderedImages = () =>\n    this.state.imageOrder.map((id) => this.state.imageUploads[id]);\n\n  _uploadedImages = (): Array<ImageUpload> =>\n    this._orderedImages().filter((upload) => upload.url);\n\n  _orderedFiles = () =>\n    this.state.fileOrder.map((id) => this.state.fileUploads[id]);\n\n  _uploadedFiles = (): Array<FileUpload> =>\n    this._orderedFiles().filter((upload) => upload.url);\n\n  _orderedOgStates = (): OgState[] =>\n    this.state.ogUrlOrder\n      .map((url) => this.state.ogStateByUrl[url])\n      .filter(Boolean);\n\n  _isOgScraping = () =>\n    this._orderedOgStates().some((state) => state.scrapingActive);\n\n  _availableOg = (): OgData[] =>\n    this._orderedOgStates()\n      .map((state) => state.data)\n      .filter(Boolean);\n\n  _activeOg = (): ?OgData => {\n    const { ogActiveUrl } = this.state;\n\n    if (ogActiveUrl) {\n      return this.state.ogStateByUrl[ogActiveUrl].data;\n    }\n  };\n\n  _canSubmit = () =>\n    Boolean(this._object()) &&\n    this._orderedImages().every((upload) => upload.state !== 'uploading') &&\n    this._orderedFiles().every((upload) => upload.state !== 'uploading') &&\n    !this._isOgScraping() &&\n    !this.state.submitting;\n\n  async addActivity() {\n    const activity: CustomActivityArgData = {\n      actor: this.props.client.currentUser,\n      verb: this.props.activityVerb,\n      object: this._object(),\n    };\n    const uploadedImages = this._uploadedImages();\n    const uploadedFiles = this._uploadedFiles();\n\n    const attachments = {};\n    attachments.og = this._activeOg();\n\n    if (uploadedImages) {\n      attachments.images = uploadedImages\n        .map((image) => image.url)\n        .filter(Boolean);\n      activity.text = this._text();\n    }\n    if (uploadedFiles) {\n      attachments.files = uploadedFiles.map((upload) => ({\n        // url will never actually be empty string because _uploadedFiles\n        // filters those out.\n        url: upload.url || '',\n        name: upload.file.name,\n        mimeType: upload.file.type,\n      }));\n    }\n\n    if (Object.keys(attachments).length > 0) {\n      activity.attachments = attachments;\n    }\n\n    const modifiedActivity = this.props.modifyActivityData(activity);\n    if (this.props.doRequest) {\n      return await this.props.doRequest(modifiedActivity);\n    } else {\n      return await this.props.client\n        .feed(this.props.feedGroup, this.props.userId)\n        .addActivity(modifiedActivity);\n    }\n  }\n\n  onSubmitForm = async (e) => {\n    e.preventDefault();\n    this.setState({ submitting: true });\n    let response;\n    try {\n      response = await this.addActivity();\n    } catch (e) {\n      this.setState({ submitting: false });\n      this.props.errorHandler(e, 'add-activity', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    this.setState({\n      text: '',\n      imageUploads: {},\n      imageOrder: [],\n      fileUploads: {},\n      fileOrder: [],\n      ogUrlOrder: [],\n      ogStateByUrl: {},\n      ogActiveUrl: null,\n      submitting: false,\n    });\n    if (this.props.onSuccess) {\n      this.props.onSuccess(response);\n    }\n  };\n  _getTextAreaElement = () => this.textInputRef.current;\n\n  _onSelectEmoji = (emoji) => this._insertText(emoji.native);\n\n  _insertText = async (insertedText) => {\n    let newCursorPosition;\n\n    await this.setState((prevState) => {\n      const prevText = prevState.text;\n      const textareaElement = this._getTextAreaElement();\n      if (!textareaElement) {\n        return { text: prevText + insertedText };\n      }\n      // Insert emoji at previous cursor position\n      const { selectionStart, selectionEnd } = textareaElement;\n      newCursorPosition = selectionStart + insertedText.length;\n      return {\n        text:\n          prevText.slice(0, selectionStart) +\n          insertedText +\n          prevText.slice(selectionEnd),\n      };\n    });\n\n    const textareaElement = this._getTextAreaElement();\n    if (!textareaElement || newCursorPosition == null) {\n      return;\n    }\n    // Update cursorPosition\n    textareaElement.selectionStart = newCursorPosition;\n    textareaElement.selectionEnd = newCursorPosition;\n  };\n\n  _uploadNewFiles = (files: $ReadOnlyArray<FileLike>) => {\n    for (const file of files) {\n      if (file.type.startsWith('image/')) {\n        this._uploadNewImage(file);\n      } else if (file instanceof File) {\n        this._uploadNewFile(file);\n      }\n    }\n  };\n\n  _uploadNewImage = async (file) => {\n    const id = generateRandomId();\n\n    await this.setState((prevState) => {\n      prevState.imageUploads[id] = {\n        id,\n        file,\n        state: 'uploading',\n      };\n      return {\n        imageOrder: prevState.imageOrder.concat(id),\n        imageUploads: prevState.imageUploads,\n      };\n    });\n    if (FileReader) {\n      // TODO: Possibly use URL.createObjectURL instead. However, then we need\n      // to release the previews when not used anymore though.\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        this.setState((prevState) => {\n          prevState.imageUploads[id].previewUri = event.target.result;\n          return { imageUploads: prevState.imageUploads };\n        });\n      };\n      reader.readAsDataURL(file);\n    }\n    return this._uploadImage(id);\n  };\n\n  _uploadNewFile = async (file: File) => {\n    const id = generateRandomId();\n\n    await this.setState((prevState) => {\n      prevState.fileUploads[id] = {\n        id,\n        file,\n        state: 'uploading',\n      };\n      return {\n        fileOrder: prevState.fileOrder.concat(id),\n        fileUploads: prevState.fileUploads,\n      };\n    });\n\n    return this._uploadFile(id);\n  };\n\n  _uploadImage = async (id: string) => {\n    const img = this.state.imageUploads[id];\n    if (!img) {\n      return;\n    }\n    const { file } = img;\n\n    await this.setState((prevState) => {\n      prevState.imageUploads[id].state = 'uploading';\n      return { imageUploads: prevState.imageUploads };\n    });\n\n    let response = {};\n    response = {};\n    try {\n      response = await this.props.client.images.upload(file);\n    } catch (e) {\n      console.warn(e);\n      let alreadyRemoved = false;\n      await this.setState((prevState) => {\n        const image = prevState.imageUploads[id];\n        if (!image) {\n          alreadyRemoved = true;\n          return {};\n        }\n        image.state = 'failed';\n        return { imageUploads: prevState.imageUploads };\n      });\n\n      if (!alreadyRemoved) {\n        this.props.errorHandler(e, 'upload-image', {\n          feedGroup: this.props.feedGroup,\n          userId: this.props.userId,\n        });\n      }\n      return;\n    }\n    await this.setState((prevState) => {\n      img.state = 'finished';\n      img.url = response.file;\n      return { imageUploads: prevState.imageUploads };\n    });\n  };\n\n  _uploadFile = async (id: string) => {\n    const upload = this.state.fileUploads[id];\n    if (!upload) {\n      return;\n    }\n    const { file } = upload;\n\n    await this.setState((prevState) => {\n      prevState.fileUploads[id].state = 'uploading';\n      return { fileUploads: prevState.fileUploads };\n    });\n\n    let response = {};\n    response = {};\n    try {\n      response = await this.props.client.files.upload(file);\n    } catch (e) {\n      console.warn(e);\n      await this.setState((prevState) => {\n        if (prevState.fileUploads[id]) {\n          prevState.fileUploads[id].state = 'failed';\n          return { fileUploads: prevState.fileUploads };\n        }\n        return {};\n      });\n\n      this.props.errorHandler(e, 'upload-image', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    await this.setState((prevState) => {\n      if (prevState.fileUploads[id]) {\n        prevState.fileUploads[id].state = 'finished';\n        prevState.fileUploads[id].url = response.file;\n        return { fileUploads: prevState.fileUploads };\n      }\n      return {};\n    });\n  };\n\n  _removeImage = (id: string) => {\n    // TODO: cancel upload if still uploading\n    this.setState((prevState) => {\n      const img = prevState.imageUploads[id];\n      if (!img) {\n        return {};\n      }\n      delete prevState.imageUploads[id];\n      return {\n        imageUploads: prevState.imageUploads,\n        imageOrder: prevState.imageOrder.filter((_id) => id !== _id),\n      };\n    });\n  };\n\n  _removeFile = (id: string) => {\n    // TODO: cancel upload if still uploading\n    this.setState((prevState) => {\n      const upload = prevState.fileUploads[id];\n      if (!upload) {\n        return {};\n      }\n      delete prevState.fileUploads[id];\n      return {\n        fileUploads: prevState.fileUploads,\n        fileOrder: prevState.fileOrder.filter((_id) => id !== _id),\n      };\n    });\n  };\n\n  _onChange = (event) => {\n    const text = inputValueFromEvent(event);\n    if (text == null) {\n      return;\n    }\n    this.setState({ text });\n    this._handleOgDebounced(text);\n  };\n\n  render() {\n    const activeOg = this._activeOg();\n    const availableOg = this._availableOg();\n    const userData = this.props.user.data || {};\n    return (\n      <Panel>\n        <form onSubmit={this.onSubmitForm}>\n          <ImageDropzone handleFiles={this._uploadNewFiles}>\n            <PanelHeading>{this.props.Header}</PanelHeading>\n            <PanelContent>\n              <div style={{ display: 'flex' }}>\n                <React.Fragment>\n                  {userData.profileImage && (\n                    <div style={{ marginRight: '16px' }}>\n                      <Avatar\n                        image={\n                          // $FlowFixMe\n                          userData.profileImage ||\n                          'https://placehold.it/100x100'\n                        }\n                        size={50}\n                        circle\n                      />\n                    </div>\n                  )}\n                </React.Fragment>\n                <Textarea\n                  innerRef={this.textInputRef}\n                  placeholder=\"Type your post... \"\n                  value={this.state.text}\n                  onChange={this._onChange}\n                  trigger={this.props.trigger}\n                  onPaste={async (event) => {\n                    const { items } = event.clipboardData;\n                    if (!dataTransferItemsHaveFiles(items)) {\n                      return;\n                    }\n\n                    event.preventDefault();\n                    // Get a promise for the plain text in case no files are\n                    // found. This needs to be done here because chrome cleans\n                    // up the DataTransferItems after resolving of a promise.\n                    let plainTextPromise;\n                    for (const item of items) {\n                      if (\n                        item.kind === 'string' &&\n                        item.type === 'text/plain'\n                      ) {\n                        plainTextPromise = new Promise((resolve) => {\n                          item.getAsString((s) => {\n                            resolve(s);\n                          });\n                        });\n                        break;\n                      }\n                    }\n\n                    const fileLikes = await dataTransferItemsToFiles(items);\n                    if (fileLikes.length) {\n                      this._uploadNewFiles(fileLikes);\n                      return;\n                    }\n                    // fallback to regular text paste\n                    if (plainTextPromise) {\n                      const s = await plainTextPromise;\n                      this._insertText(s);\n                    }\n                  }}\n                />\n              </div>\n              {this._isOgScraping() && (\n                <div className=\"raf-status-update-form__og-loading\">\n                  <LoadingIndicator /> Getting website data...\n                </div>\n              )}\n              {activeOg && (\n                <div style={{ margin: '8px 0' }}>\n                  {!activeOg.videos && !activeOg.audios ? (\n                    <Card\n                      {...activeOg}\n                      nolink\n                      handleClose={(e: any) => {\n                        e.preventDefault();\n                        this._dismissOg(activeOg);\n                      }}\n                    />\n                  ) : (\n                    <React.Fragment>\n                      {activeOg.videos ? (\n                        <Video\n                          og={activeOg}\n                          handleClose={(e: any) => {\n                            e.preventDefault();\n                            this._dismissOg(activeOg);\n                          }}\n                        />\n                      ) : null}\n                      {activeOg.audios ? (\n                        <Audio\n                          og={activeOg}\n                          handleClose={(e: any) => {\n                            e.preventDefault();\n                            this._dismissOg(activeOg);\n                          }}\n                        />\n                      ) : null}\n                    </React.Fragment>\n                  )}\n                </div>\n              )}\n              {availableOg && availableOg.length > 1 && (\n                <React.Fragment>\n                  <ol className=\"raf-status-update-form__url-list\">\n                    {availableOg.map(({ url, title }) => (\n                      <li\n                        className={`raf-status-update-form__url-list-item${\n                          url === this.state.ogActiveUrl\n                            ? ' raf-status-update-form__url-list-item--active'\n                            : ''\n                        }`}\n                        onClick={() =>\n                          this.setState((prevState) => {\n                            const ogState = prevState.ogStateByUrl[url];\n                            if (ogState) {\n                              ogState.dismissed = false;\n                            }\n                            return {\n                              ogActiveUrl: url,\n                              ogStateByUrl: prevState.ogStateByUrl,\n                            };\n                          })\n                        }\n                        key={url}\n                      >\n                        <FontAwesomeIcon icon={faBookmark} />{' '}\n                        {title !== undefined ? title : url}\n                      </li>\n                    ))}\n                  </ol>\n                </React.Fragment>\n              )}\n              {this.state.imageOrder.length > 0 && (\n                <ImagePreviewer\n                  imageUploads={this.state.imageOrder.map(\n                    (id) => this.state.imageUploads[id],\n                  )}\n                  handleRemove={this._removeImage}\n                  handleRetry={this._uploadImage}\n                  handleFiles={this._uploadNewFiles}\n                />\n              )}\n              {this.state.fileOrder.length > 0 && (\n                <FilePreviewer\n                  uploads={this.state.fileOrder.map(\n                    (id) => this.state.fileUploads[id],\n                  )}\n                  handleRemove={this._removeFile}\n                  handleRetry={this._uploadFile}\n                  handleFiles={this._uploadNewFiles}\n                />\n              )}\n            </PanelContent>\n            <PanelFooter>\n              <div style={{ display: 'flex', alignItems: 'center' }}>\n                <div style={{ flex: 1 }}>\n                  <div style={{ marginRight: '32px', display: 'inline-block' }}>\n                    <ImageUploadButton\n                      handleFiles={this._uploadNewFiles}\n                      multiple\n                    />\n                  </div>\n                  <div style={{ marginRight: '32px', display: 'inline-block' }}>\n                    <FileUploadButton\n                      handleFiles={this._uploadNewFiles}\n                      multiple\n                    />\n                  </div>\n                  <EmojiPicker onSelect={this._onSelectEmoji} />\n                  {this.props.FooterItem}\n                </div>\n                <Button\n                  type=\"submit\"\n                  buttonStyle=\"primary\"\n                  loading={this.state.submitting}\n                  disabled={!this._canSubmit()}\n                >\n                  Post\n                </Button>\n              </div>\n            </PanelFooter>\n          </ImageDropzone>\n        </form>\n      </Panel>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nexport type Props = {|\n  children?: React.Node,\n  showNumber?: boolean,\n  hidden?: boolean,\n  feedGroup?: string,\n  userId?: string,\n  unseen: number,\n  onClick?: () => mixed,\n|};\n\n/**\n *\n * @example ./examples/IconBadge.md\n */\nexport default class IconBadge extends React.Component<Props> {\n  render() {\n    return (\n      <div\n        className=\"raf-icon-badge\"\n        role=\"button\"\n        onClick={this.props.onClick}\n      >\n        {this.props.children ? (\n          this.props.children\n        ) : (\n          <svg\n            width=\"17\"\n            height=\"20\"\n            viewBox=\"0 0 17 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M8.5 20c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6.5-6V8.5c0-3.07-2.13-5.64-5-6.32V1.5C10 .67 9.33 0 8.5 0S7 .67 7 1.5v.68c-2.87.68-5 3.25-5 6.32V14l-2 2v1h17v-1l-2-2zm-2 1H4V8.5C4 6.01 6.01 4 8.5 4S13 6.01 13 8.5V15z\"\n              // fill=\"#414D54\"\n              fillRule=\"evenodd\"\n            />\n          </svg>\n        )}\n        {!this.props.hidden && this.props.unseen > 0 ? (\n          <div className=\"raf-icon-badge__badge\">\n            {this.props.showNumber ? <p>{this.props.unseen}</p> : null}\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { smartRender } from '../utils';\n\nimport type { Renderable } from '../types';\n\nexport type Props = {|\n  children?: React.Node,\n  Header?: Renderable,\n  Footer?: Renderable,\n  left: boolean,\n  right: boolean,\n  arrow: boolean,\n|};\n\n/**\n * `DropdownPanel` is a more advanced component used to create a notification dropdown for instance, it comes with three parts: `Header`, `Content` and `Footer`. The content has a limited height and the `overflow` is set to `scroll`.\n *\n * @example ./examples/DropdownPanel.md\n */\nexport default class DropdownPanel extends React.Component<Props> {\n  static defaultProps = {\n    arrow: false,\n    left: true,\n    right: false,\n  };\n\n  render() {\n    return (\n      <div\n        className={`raf-dropdown-panel ${\n          this.props.arrow ? ' raf-dropdown-panel--arrow' : ''\n        } ${\n          this.props.right\n            ? ' raf-dropdown-panel--right raf-dropdown-panel--arrow-right'\n            : 'raf-dropdown-panel--left raf-dropdown-panel--arrow-left'\n        }`}\n      >\n        {this.props.Header != null && (\n          <div className=\"raf-dropdown-panel__header\">\n            {smartRender(this.props.Header, {}, null)}\n          </div>\n        )}\n        <div className=\"raf-dropdown-panel__content\">{this.props.children}</div>\n        {this.props.Footer != null && (\n          <div className=\"raf-dropdown-panel__footer\">\n            {smartRender(this.props.Footer, {}, null)}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { Feed, FeedContext } from '../Context';\nimport NotificationFeed from './NotificationFeed';\nimport Notification from './Notification';\nimport NewActivitiesNotification from './NewActivitiesNotification';\nimport LoadMorePaginator from './LoadMorePaginator';\nimport FeedPlaceholder from './FeedPlaceholder';\nimport IconBadge from './IconBadge';\nimport DropdownPanel from './DropdownPanel';\nimport type {\n  // BaseActivityResponse,\n  BaseFeedCtx,\n  BaseClient,\n  Renderable,\n  BaseActivityResponse,\n  BaseReaction,\n} from '../types';\n\nimport { smartRender } from '../utils';\n\nimport type { FeedRequestOptions, FeedResponse } from 'getstream';\n\ntype Props = {|\n  /** The feed group part of the feed that should be displayed */\n  feedGroup: string,\n  /** The user_id part of the feed that should be displayed */\n  userId?: string,\n  /** Read options for the API client (eg. limit, mark_seen, ...) */\n  options?: FeedRequestOptions,\n  /** The component used to render a group in the feed */\n  Group: Renderable,\n  /** If true, feed shows the NewActivitiesNotification component when new\n   * activities are added */\n  notify: boolean,\n  /** The component to use to render new activities notification */\n  Notifier: Renderable,\n  /** By default pagination is done with a \"Load more\" button, you can use\n   * InifiniteScrollPaginator to enable infinite scrolling */\n  Paginator: Renderable,\n  /** Component to show when there are no activities in the feed */\n  Placeholder: Renderable,\n  /** Icon component  */\n  Icon?: Renderable,\n  /** Header component  */\n  Header?: Renderable,\n  /** Footer component */\n  Footer?: Renderable,\n  /** The feed read handler (change only for advanced/complex use-cases) */\n  doFeedRequest?: (\n    client: BaseClient,\n    feedGroup: string,\n    userId?: string,\n    options?: FeedRequestOptions,\n  ) => Promise<FeedResponse<{}, {}>>,\n  /** Override activity delete request */\n  doActivityDeleteRequest?: (id: string) => mixed,\n  /** Override reaction add request */\n  doReactionAddRequest?: (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override reaction delete request */\n  doReactionDeleteRequest?: (id: string) => mixed,\n  /** Override child reaction add request */\n  doChildReactionAddRequest?: (\n    kind: string,\n    activity: BaseReaction,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override child reaction delete request */\n  doChildReactionDeleteRequest?: (id: string) => mixed,\n  /** The location that should be used for analytics when liking in the feed,\n   * this is only useful when you have analytics enabled for your app. */\n  analyticsLocation?: string,\n  /** The width of the dropdown */\n  width?: number,\n  /** Used to position the dropdown different horizontaly */\n  right?: boolean,\n|};\n\n/**\n * IMPORTANT: Changing most of the props below doesn't result in the desired\n * effect. These settings related to feed management should be changed in the\n * `sharedFeeds` prop of the [`StreamApp`](#streamapp) component.\n * @example ./examples/NotificationDropdown.md\n */\n\nexport default class NotificationDropdown extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'notification',\n    Group: Notification,\n    notify: true,\n    Notifier: NewActivitiesNotification,\n    Paginator: LoadMorePaginator,\n    Placeholder: FeedPlaceholder,\n    width: 475,\n  };\n  render() {\n    return (\n      <Feed\n        feedGroup={this.props.feedGroup}\n        userId={this.props.userId}\n        options={makeDefaultOptions({ mark_seen: false })}\n        doFeedRequest={this.props.doFeedRequest}\n      >\n        <FeedContext.Consumer>\n          {(feedCtx) => (\n            <NotificationDropdownInner {...this.props} {...feedCtx} />\n          )}\n        </FeedContext.Consumer>\n      </Feed>\n    );\n  }\n}\n\ntype State = {|\n  open: boolean,\n|};\n\ntype PropsInner = {| ...Props, ...BaseFeedCtx |};\nclass NotificationDropdownInner extends React.Component<PropsInner, State> {\n  dropdownRef: { current: null | HTMLDivElement };\n\n  constructor(props: PropsInner) {\n    super(props);\n    this.state = {\n      open: false,\n    };\n    this.dropdownRef = React.createRef();\n  }\n\n  _refresh = async () => {\n    await this.props.refresh(makeDefaultOptions(this.props.options));\n  };\n\n  openDropdown = () => {\n    this.setState(\n      {\n        open: true,\n      },\n      () => {\n        //$FlowFixMe\n        document.addEventListener('click', this.closeDropdown, false);\n      },\n    );\n  };\n\n  closeDropdown = (e) => {\n    if (\n      this.dropdownRef.current !== null &&\n      !this.dropdownRef.current.contains(e.target)\n    ) {\n      this.setState(\n        {\n          open: false,\n        },\n        () => {\n          //$FlowFixMe\n          document.removeEventListener('click', this.closeDropdown, false);\n        },\n      );\n    }\n  };\n\n  componentDidMount() {\n    this.props.refreshUnreadUnseen();\n  }\n\n  componentWillUnmount() {\n    //$FlowFixMe\n    document.removeEventListener('click', this.closeDropdown, false);\n  }\n\n  render() {\n    return (\n      <div style={{ position: 'relative', display: 'inline-block' }}>\n        <IconBadge\n          unseen={this.props.unseen}\n          onClick={this.openDropdown}\n          showNumber={true}\n          hidden={!this.props.notify}\n        >\n          {this.props.Icon && smartRender(this.props.Icon, {}, null)}\n        </IconBadge>\n\n        <div\n          ref={this.dropdownRef}\n          style={{\n            position: 'absolute',\n            left: this.props.right ? '' : '-22px',\n            right: this.props.right ? -29 : 0,\n            top: 35,\n            width: '100vw',\n            maxWidth: this.props.width,\n            zIndex: 9999,\n            visibility: this.state.open ? 'visible' : 'hidden',\n            transform: this.state.open ? 'translateY(0px)' : 'translateY(10px)',\n            opacity: this.state.open ? '1' : '0',\n            transition: 'all .2s ease-out',\n          }}\n        >\n          {this.state.open && (\n            <DropdownPanel\n              arrow\n              right={this.props.right}\n              Header={this.props.Header}\n              Footer={this.props.Footer}\n            >\n              <NotificationFeed\n                feedGroup={this.props.feedGroup}\n                userId={this.props.userId}\n                options={this.props.options}\n                Group={this.props.Group}\n                notify={this.props.notify}\n                Notifier={this.props.Notifier}\n                Paginator={this.props.Paginator}\n                Placeholder={this.props.Placeholder}\n                doFeedRequest={this.props.doFeedRequest}\n                doActivityDeleteRequest={this.props.doActivityDeleteRequest}\n                doReactionAddRequest={this.props.doReactionAddRequest}\n                doReactionDeleteRequest={this.props.doReactionDeleteRequest}\n                doChildReactionAddRequest={this.props.doChildReactionAddRequest}\n                doChildReactionDeleteRequest={\n                  this.props.doChildReactionDeleteRequest\n                }\n                analyticsLocation={this.props.analyticsLocation}\n              />\n            </DropdownPanel>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst makeDefaultOptions = (options) => {\n  const copy = { ...options };\n  if (copy.mark_seen === undefined) {\n    copy.mark_seen = true;\n  }\n  return copy;\n};\n","/* eslint-disable */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class InfiniteScroll extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    element: PropTypes.node,\n    hasMore: PropTypes.bool,\n    initialLoad: PropTypes.bool,\n    isReverse: PropTypes.bool,\n    loader: PropTypes.node,\n    loadMore: PropTypes.func.isRequired,\n    pageStart: PropTypes.number,\n    ref: PropTypes.func,\n    threshold: PropTypes.number,\n    useCapture: PropTypes.bool,\n    useWindow: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    element: 'div',\n    hasMore: false,\n    initialLoad: true,\n    pageStart: 0,\n    ref: null,\n    threshold: 250,\n    useWindow: true,\n    isReverse: false,\n    useCapture: false,\n    loader: null,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.scrollListener = this.scrollListener.bind(this);\n  }\n\n  componentDidMount() {\n    this.pageLoaded = this.props.pageStart;\n    this.attachScrollListener();\n  }\n\n  componentDidUpdate() {\n    this.attachScrollListener();\n  }\n\n  componentWillUnmount() {\n    this.detachScrollListener();\n    this.detachMousewheelListener();\n  }\n\n  // Set a defaut loader for all your `InfiniteScroll` components\n  setDefaultLoader(loader) {\n    this.defaultLoader = loader;\n  }\n\n  detachMousewheelListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.scrollComponent.parentNode;\n    }\n\n    scrollEl.removeEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.props.useCapture,\n    );\n  }\n\n  detachScrollListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.removeEventListener(\n      'scroll',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n    scrollEl.removeEventListener(\n      'resize',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n  }\n\n  getParentElement(el) {\n    return el && el.parentNode;\n  }\n\n  filterProps(props) {\n    return props;\n  }\n\n  attachScrollListener() {\n    if (\n      !this.props.hasMore ||\n      this.props.isLoading ||\n      !this.getParentElement(this.scrollComponent)\n    ) {\n      return;\n    }\n\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.addEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.props.useCapture,\n    );\n    scrollEl.addEventListener(\n      'scroll',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n    scrollEl.addEventListener(\n      'resize',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n\n    if (this.props.initialLoad) {\n      this.scrollListener();\n    }\n  }\n\n  mousewheelListener(e) {\n    // Prevents Chrome hangups\n    // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n    if (e.deltaY === 1) {\n      e.preventDefault();\n    }\n  }\n\n  scrollListener() {\n    const el = this.scrollComponent;\n    const scrollEl = window;\n    const parentNode = this.getParentElement(el);\n\n    let offset;\n    if (this.props.useWindow) {\n      const doc =\n        document.documentElement || document.body.parentNode || document.body;\n      const scrollTop =\n        scrollEl.pageYOffset !== undefined\n          ? scrollEl.pageYOffset\n          : doc.scrollTop;\n      if (this.props.isReverse) {\n        offset = scrollTop;\n      } else {\n        offset = this.calculateOffset(el, scrollTop);\n      }\n    } else if (this.props.isReverse) {\n      offset = parentNode.scrollTop;\n    } else {\n      offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n    }\n\n    // Here we make sure the element is visible as well as checking the offset\n    if (\n      offset < Number(this.props.threshold) &&\n      (el && el.offsetParent !== null)\n    ) {\n      this.detachScrollListener();\n      // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n      if (typeof this.props.loadMore === 'function') {\n        this.props.loadMore((this.pageLoaded += 1));\n      }\n    }\n  }\n\n  calculateOffset(el, scrollTop) {\n    if (!el) {\n      return 0;\n    }\n\n    return (\n      this.calculateTopPosition(el) +\n      (el.offsetHeight - scrollTop - window.innerHeight)\n    );\n  }\n\n  calculateTopPosition(el) {\n    if (!el) {\n      return 0;\n    }\n    return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n  }\n\n  render() {\n    const renderProps = this.filterProps(this.props);\n    const {\n      children,\n      element,\n      hasMore,\n      initialLoad,\n      isReverse,\n      loader,\n      loadMore,\n      pageStart,\n      ref,\n      threshold,\n      useCapture,\n      useWindow,\n      isLoading,\n      ...props\n    } = renderProps;\n\n    props.ref = (node) => {\n      this.scrollComponent = node;\n      if (ref) {\n        ref(node);\n      }\n    };\n\n    const childrenArray = [children];\n    if (isLoading) {\n      if (loader) {\n        isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n      } else if (this.defaultLoader) {\n        isReverse\n          ? childrenArray.unshift(this.defaultLoader)\n          : childrenArray.push(this.defaultLoader);\n      }\n    }\n    return React.createElement(element, props, childrenArray);\n  }\n}\n","//@flow\nimport * as React from 'react';\nimport InfiniteScroll from './InfiniteScroll';\nimport { LoadingIndicator } from 'react-file-utils';\n\nimport { smartRender } from '../utils';\n\nimport type { Renderable } from '../types';\n\ntype Props = {|\n  /** callback to load the next page */\n  loadNextPage: () => mixed,\n  /** indicates if there is a next page to load */\n  hasNextPage: boolean,\n  /** indicates if there there's currently any refreshing taking place */\n  refreshing: boolean,\n  /** display the items in opposite order */\n  reverse: boolean,\n  /** threshold to trigger the loadNextPage */\n  threshold: number,\n  /** The paginated content to display */\n  children: React.Node,\n  /** Component to show when paginator is loading **/\n  Loader: Renderable,\n|};\n\nexport default class InfiniteScrollPaginator extends React.Component<Props> {\n  static defaultProps = {\n    Loader: <LoadingIndicator />,\n    threshold: 250,\n  };\n\n  render() {\n    return (\n      <InfiniteScroll\n        loadMore={this.props.loadNextPage}\n        hasMore={this.props.hasNextPage}\n        isLoading={this.props.refreshing}\n        isReverse={this.props.reverse}\n        threshold={this.props.threshold}\n        loader={\n          <React.Fragment key=\"loading-indicator\">\n            {smartRender(this.props.Loader)}\n          </React.Fragment>\n        }\n      >\n        {this.props.children}\n      </InfiniteScroll>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport type { ReactionCounts } from 'getstream';\n\ntype Props = {|\n  /** The icon to display */\n  icon: string | number,\n  /** The reaction counts for the activity */\n  counts?: ReactionCounts,\n  /** The kind of reaction that this displays */\n  kind: string,\n  /** The height of the icon */\n  height?: number,\n  /** The width of the icon */\n  width?: number,\n  /** Function to call when pressed, usually this should call `props.onToggleReaction` */\n  onPress?: (kind: string) => any,\n  /** The label to display if the count is one (e.g \"like\") */\n  labelSingle?: string,\n  /** The label to display if the count is more than one (e.g \"likes\") */\n  labelPlural?: string,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/ReactionIcon.md\n */\n\nexport default class ReactionIcon extends React.Component<Props> {\n  render() {\n    let count = null;\n    if (this.props.counts && this.props.kind) {\n      count = this.props.counts[this.props.kind] || 0;\n    }\n\n    const dimensions = {};\n    if (this.props.height !== undefined) {\n      dimensions.height = this.props.height;\n    }\n    if (this.props.width !== undefined) {\n      dimensions.width = this.props.width;\n    }\n    const label = count === 1 ? this.props.labelSingle : this.props.labelPlural;\n\n    return (\n      <div className=\"raf-reaction-icon\" onClick={this.props.onPress}>\n        {this.props.icon ? (\n          <img\n            className=\"raf-reaction-icon__image\"\n            src={this.props.icon}\n            alt=\"\"\n          />\n        ) : null}\n        {count != null ? (\n          <p className=\"raf-reaction-icon__label\">\n            {count}\n            {label && ' ' + label}\n          </p>\n        ) : null}\n      </div>\n    );\n  }\n}\n","// @flow\n\nimport React from 'react';\nimport ReactionIcon from './ReactionIcon';\nimport type { ReactionCounts, ReactionKindMap } from 'getstream';\n\ntype Props = {|\n  /** The icon to show when the user has done this reaction (e.g. a filled in heart) */\n  activeIcon: string,\n  /** The icon to show when the user has not done this reaction yet (e.g. an empty in heart) */\n  inactiveIcon: string,\n  /** The kind of reaction that this toggles */\n  kind: string,\n  /** The height of the icon */\n  height?: number,\n  /** The width of the icon */\n  width?: number,\n  /** The map with own reactions */\n  own_reactions: ?ReactionKindMap<{}, {}>,\n  /** The reaction counts for the activity */\n  counts?: ReactionCounts,\n  /** Function to call when pressed, usually this should call\n   * `props.onToggleReaction` */\n  onPress?: (kind: string) => any,\n  /** The label to display if the count is one (e.g \"like\") */\n  labelSingle?: string,\n  /** The label to display if the count is more than one (e.g \"likes\") */\n  labelPlural?: string,\n|};\n\n/**\n * A generic component that can be used to toggle a reaction and display it's\n * current state. Mostly used for reactions such as like and repost.\n * The [source for\n * LikeButton](https://github.com/GetStream/react-activity-feed/blob/master/src/components/LikeButton.js)\n * is a good example of the usage of this component.\n *\n * @example ./examples/ReactionToggleIcon.md\n */\nexport default class ReactionToggleIcon extends React.Component<Props> {\n  render() {\n    const {\n      inactiveIcon,\n      activeIcon,\n      own_reactions,\n      kind,\n      ...restProps\n    } = this.props;\n    let icon = inactiveIcon;\n    if (own_reactions && own_reactions[kind] && own_reactions[kind].length) {\n      icon = activeIcon;\n    }\n    return (\n      <div className=\"raf-reaction-toggle-icon\">\n        <ReactionIcon icon={icon} kind={kind} {...restProps} />\n      </div>\n    );\n  }\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAARCAYAAAA/mJfHAAAAAXNSR0IArs4c6QAAAUxJREFUOBGtk89Kw0AQxudLi4Zmo1ARPIgtnvoAPfoCevZPn0LoG9QX8OBBvHtpohcP4s2zIsUHEMR4EPEgWGqFVDPORhaibGPFLCQzu/PNb3YzG6IJhxfct1UQdfLkyAuamAqjdWYKiRllB82XzVrPxLK2nJ3YfD+MVpKEDyWWFv4gR9l0es0ZF9Dr/vFDQ3Z0Iq6b6gCeUpXr1Le8xsLmw6eF5D0+Y+aqyQPzzfPaXN/Mf1orTEBqyG+nIq5/SwBZv5XRWBugulHIxBtGlGtBMQj7g61aG173jo34tVVP4V4QjaRzvzbH5Gk7PePPWo/5V5D0Od5erQ7ssGzJCXww3XaApBAYEy50zUJgJWlAUbDLfmvpqhiYU9rTID3+d0zQY2N58egLNQ4GDI0gz8plPeg1MTIa685kcYc0UH5s60NIAJy7bmXXgLT9BOn0XD2NtcXgAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAARCAYAAAA/mJfHAAAAAXNSR0IArs4c6QAAAUpJREFUOBGtk7FKA0EQhmeWLQSDiWKhnaVYH8TCUoiKptLKFPcKeQN9gRQpgmVUsDgrcwQ9BK9VRHwAwdpaJGACO85EllxkXS4kA8fMzv7z3ewsC5DT2p2kfh4nJz45+jbtHkMOOY6ICEFhEO5XXuxe1qvswhVfxPdbBHA5BLFAGSy4dJLzwq7iZN2AuQGiOREjIim98Cqxy/6FRd10pU90y6ClUSG91fY2P0fr8cgJi9K00DPfXZaujckJnLOyGucF8MBl2EdW5PMM6BNgK6xW6tju3PF8fy2s7gzhDBswTNt8Hq91qeg85qQg6e54t/zlhOXpJKshxHe+aTMTGN/4o8BnAtOgWwKbaMhS8Nf4eE+1g+1nyU/dGQI17Q+mgyF8bKwuX/thCD0r8HkEPAuCYGA1zs4UqFNgoDxs18fFhkEPpcX5hgWJ/wEycGS98JuJ8gAAAABJRU5ErkJggg==\"","// @flow\nimport * as React from 'react';\nimport ReactionToggleIcon from './ReactionToggleIcon';\nimport type {\n  BaseActivityResponse,\n  BaseReaction,\n  ToggleReactionCallbackFunction,\n  ToggleChildReactionCallbackFunction,\n} from '../types';\n\nimport likebuttonActive from '../images/like-active@1x.png';\nimport likebuttonInactive from '../images/like@1x.png';\n\ntype Props = {|\n  /** The activity received from stream that should be liked when pressing the\n   * LikeButton. */\n  activity: BaseActivityResponse,\n  /** The reaction received from stream that should be liked when pressing the\n   * LikeButton. Liking a reaction requires to pass both this field and\n   * the `onToggleChildReaction` as well. */\n  reaction?: BaseReaction,\n  /** The function that toggles reactions on activities. */\n  onToggleReaction: ToggleReactionCallbackFunction,\n  /** The function that toggles reactions on reactions. */\n  onToggleChildReaction?: ToggleChildReactionCallbackFunction,\n|};\n\n/**\n * Like button ready to be embedded as Activity footer\n * @example ./examples/LikeButton.md\n */\nexport default class LikeButton extends React.Component<Props> {\n  _onPress = () => {\n    const {\n      activity,\n      reaction,\n      onToggleReaction,\n      onToggleChildReaction,\n    } = this.props;\n\n    if (reaction && onToggleChildReaction) {\n      return onToggleChildReaction('like', reaction, {}, {});\n    }\n    return onToggleReaction('like', activity, {}, {});\n  };\n\n  render() {\n    const { activity, reaction } = this.props;\n    let counts, own_reactions;\n    if (reaction && this.props.onToggleChildReaction) {\n      counts = reaction.children_counts;\n      own_reactions = reaction.own_children;\n    } else {\n      if (reaction) {\n        console.warn(\n          'reaction is passed to the LikeButton but ' +\n            'onToggleChildReaction is not, falling back to liking the activity',\n        );\n      }\n      counts = activity.reaction_counts;\n      own_reactions = activity.own_reactions;\n    }\n\n    return (\n      <ReactionToggleIcon\n        counts={counts}\n        own_reactions={own_reactions}\n        kind=\"like\"\n        onPress={this._onPress}\n        activeIcon={likebuttonActive}\n        inactiveIcon={likebuttonInactive}\n        labelSingle=\"like\"\n        labelPlural=\"likes\"\n      />\n    );\n  }\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAYAAACAl21KAAAAAXNSR0IArs4c6QAAAKlJREFUOBHdk8ENgzAMRTHqDXaArdptoNvAVrBDe071I/3oFwkhxzdysS0nz9+J0zSVq1/3WY+2Gnj8lNKksGoQiirMqKJbtkTfa83sHVKkBR8awP++xqLymNOYHUDN5znMIUWEoEA1SCEhENoB4IYLr8aXQ3t/l60j7+29gADByHsB3J9BUQhgFoXwJ5TWKLHW5n+lqljBC8yKMKUYee/h0/1Qdpq8SPwAJWhChOoqSnsAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAYAAACAl21KAAAAAXNSR0IArs4c6QAAAKlJREFUOBHdk8ENgzAMRTHqbnCBFdpNoJvACnBpp0v1I/3oFwkhxzdysS0nz9+J0zSVa92/sx5tNfD4KaVJYdUgFFWYUcWyfRJ9rzWzd0iRFnxoAP819kXlMacxO4Ca59DNIUWEoEA1SCEhENoB4IYLr8aXQ3t/l60j7+29gADByHsB3J9BUQhgFoXwJ5TWKLHW5n+lqljBC8yKMKUYee/h0/1Qdpq8SPwAvNZE146X6PUAAAAASUVORK5CYII=\"","// @flow\nimport * as React from 'react';\nimport ReactionToggleIcon from './ReactionToggleIcon';\nimport type {\n  BaseActivityResponse,\n  ToggleReactionCallbackFunction,\n} from '../types';\n\nimport { StreamApp } from '../Context';\n\nimport repostButtonActive from '../images/repost-active@1x.png';\nimport repostButtonInactive from '../images/repost@1x.png';\n\ntype Props = {|\n  /** The feed group part of the feed that the activity should be reposted to,\n   * e.g. `user` when posting to your own profile */\n  feedGroup: string,\n  /** The user_id part of the feed that the activity should be reposted to  */\n  userId?: string,\n  /** The activity received for stream for which to show the like buton. This is\n   * used to initalize the toggle state and the counter. */\n  activity: BaseActivityResponse,\n  /** The function that toggles the reaction. */\n  onToggleReaction: ToggleReactionCallbackFunction,\n|};\n\n/**\n * A repost button ready to be embedded as Activity footer\n * @example ./examples/RepostButton.md\n */\n\nexport default class RepostButton extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'user',\n  };\n\n  render() {\n    if (this.props.userId != null) {\n      return <RepostButtonInner {...this.props} />;\n    }\n    return (\n      <StreamApp.Consumer>\n        {(appCtx) => (\n          <RepostButtonInner {...this.props} userId={appCtx.user.id} />\n        )}\n      </StreamApp.Consumer>\n    );\n  }\n}\n\ntype PropsInner = {| ...Props, userId: string |};\nclass RepostButtonInner extends React.Component<PropsInner> {\n  render() {\n    const { feedGroup, userId, activity, onToggleReaction } = this.props;\n\n    return (\n      <ReactionToggleIcon\n        counts={activity.reaction_counts}\n        own_reactions={activity.own_reactions}\n        kind=\"repost\"\n        onPress={() =>\n          onToggleReaction(\n            'repost',\n            activity,\n            {},\n            { targetFeeds: [`${feedGroup}:${userId}`] },\n          )\n        }\n        activeIcon={repostButtonActive}\n        inactiveIcon={repostButtonInactive}\n        labelSingle=\"repost\"\n        labelPlural=\"reposts\"\n      />\n    );\n  }\n}\n","// @flow\nimport React from 'react';\n\nexport type Props = {|\n  /** callback function used on click */\n  onClick?: () => mixed,\n  /** initial follow state */\n  followed?: boolean,\n|};\n\nexport type State = {\n  followed: boolean,\n};\n\n/**\n * Component is described here.\n *\n * @example ./examples/FollowButton.md\n */\nexport default class FollowButton extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { followed: this.props.followed || false };\n  }\n\n  render() {\n    const { onClick, followed } = this.props;\n    return (\n      <div\n        className={`raf-follow-button ${\n          followed ? 'raf-follow-button--active' : ''\n        }`}\n        role=\"button\"\n        onClick={onClick}\n      >\n        {followed ? 'Following' : 'Follow'}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport LoadMorePaginator from './LoadMorePaginator';\nimport { FeedContext } from '../Context';\nimport type { Renderable, BaseFeedCtx } from '../types';\nimport { smartRender } from '../utils';\nimport immutable from 'immutable';\n\ntype Props = {|\n  /** The ID of the activity for which these reactions are */\n  activityId: string,\n  /** The reaction kind that you want to display in this list, e.g `like` or\n   * `comment` */\n  reactionKind: string,\n  /** The component that should render the reaction */\n  Reaction: Renderable,\n  /** By default pagination is done with a \"Load more\" button, you can use\n   * InifiniteScrollPaginator to enable infinite scrolling */\n  Paginator: Renderable,\n  /** Only needed for reposted activities where you want to show the reactions\n   * of the original activity, not of the repost */\n  activityPath?: ?Array<string>,\n  /** Show and load reactions starting with the oldest reaction first, instead\n   * of the default where reactions are displayed and loaded most recent first.\n   * */\n  oldestToNewest: boolean,\n  /** Reverse the order the reactions are displayed in. */\n  reverseOrder: boolean,\n|};\n\nexport default class ReactionList extends React.PureComponent<Props> {\n  static defaultProps = {\n    Paginator: LoadMorePaginator,\n    oldestToNewest: false,\n    reverseOrder: false,\n  };\n\n  render() {\n    return (\n      <FeedContext.Consumer>\n        {(appCtx) => <ReactionListInner {...this.props} {...appCtx} />}\n      </FeedContext.Consumer>\n    );\n  }\n}\n\ntype PropsInner = {| ...Props, ...BaseFeedCtx |};\nclass ReactionListInner extends React.Component<PropsInner> {\n  componentDidMount() {\n    const {\n      activityId,\n      activities,\n      reactionKind,\n      getActivityPath,\n      oldestToNewest,\n    } = this.props;\n    if (!oldestToNewest) {\n      return;\n    }\n\n    const activityPath = this.props.activityPath || getActivityPath(activityId);\n    const orderPrefix = 'oldest';\n    const reactions_extra = activities.getIn([\n      ...activityPath,\n      orderPrefix + '_reactions_extra',\n    ]);\n    if (reactions_extra) {\n      return;\n    }\n    return this.props.loadNextReactions(\n      activityId,\n      reactionKind,\n      activityPath,\n      oldestToNewest,\n    );\n  }\n\n  render() {\n    const {\n      activityId,\n      activities,\n      reactionKind,\n      getActivityPath,\n      oldestToNewest,\n      reverseOrder,\n    } = this.props;\n    const activityPath = this.props.activityPath || getActivityPath(activityId);\n    let orderPrefix = 'latest';\n    if (oldestToNewest) {\n      orderPrefix = 'oldest';\n    }\n\n    let reactionsOfKind = activities.getIn(\n      [...activityPath, orderPrefix + '_reactions', reactionKind],\n      immutable.List(),\n    );\n    if (reverseOrder) {\n      reactionsOfKind = reactionsOfKind.reverse();\n    }\n\n    const reactions_extra = activities.getIn([\n      ...activityPath,\n      orderPrefix + '_reactions_extra',\n    ]);\n    let nextUrl = 'https://api.stream-io-api.com/';\n    if (reactions_extra) {\n      nextUrl = reactions_extra.getIn([reactionKind, 'next'], '');\n    }\n\n    const refreshing = activities.getIn(\n      [\n        ...activityPath,\n        orderPrefix + '_reactions_extra',\n        reactionKind,\n        'refreshing',\n      ],\n      false,\n    );\n\n    return smartRender(this.props.Paginator, {\n      loadNextPage: () =>\n        this.props.loadNextReactions(\n          activityId,\n          reactionKind,\n          activityPath,\n          oldestToNewest,\n        ),\n      hasNextPage: Boolean(nextUrl),\n      refreshing,\n      reverse: reverseOrder,\n      children: (\n        <React.Fragment>\n          {reactionsOfKind.map((reaction) => (\n            <ImmutableItemWrapper\n              key={reaction.get('id')}\n              item={reaction}\n              renderItem={this.renderReaction}\n            />\n          ))}\n        </React.Fragment>\n      ),\n    });\n  }\n  renderReaction = (reaction) => {\n    const { Reaction } = this.props;\n\n    return smartRender(Reaction, { reaction });\n  };\n}\n\ntype ImmutableItemWrapperProps = {\n  renderItem: (item: any) => any,\n  item: any,\n};\n\nclass ImmutableItemWrapper extends React.PureComponent<ImmutableItemWrapperProps> {\n  render() {\n    return this.props.renderItem(this.props.item.toJS());\n  }\n}\n","// @flow\nimport * as React from 'react';\n\ntype Align = 'center' | 'flex-start' | 'flex-end';\ntype Justify =\n  | 'center'\n  | 'space-between'\n  | 'space-around'\n  | 'flex-start'\n  | 'flex-end';\ntype JustifySelf =\n  | 'center'\n  | 'space-between'\n  | 'space-around'\n  | 'flex-start'\n  | 'flex-end'\n  | 'stretch';\ntype Direction = 'row' | 'column' | 'row-reverse' | 'column-reverse';\ntype Wrap = 'wrap' | 'nowrap' | 'wrap-reverse';\n\ntype Props = {|\n  children: React.Node,\n  a?: Align,\n  j?: Justify,\n  js?: JustifySelf,\n  d: Direction,\n  w: Wrap,\n  style?: any,\n|};\n/**\n * Simple Flex wrapper for centering UI elements. To be expanded in the future.\n *\n * @example ./examples/Flex.md\n */\nexport default class Flex extends React.Component<Props> {\n  static defaultProps = {\n    d: 'row',\n    w: 'nowrap',\n  };\n  render() {\n    return (\n      <div\n        className={`raf-flex`}\n        style={{\n          justifyContent: this.props.j,\n          alignItems: this.props.a,\n          justifySelf: this.props.js,\n          flexDirection: this.props.d,\n          flexWrap: this.props.w,\n          ...this.props.style,\n        }}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport Avatar from './Avatar';\nimport Flex from './Flex';\nimport type { Comment } from '../types';\n\nimport { humanizeTimestamp, textRenderer } from '../utils';\n\nexport type Props = {|\n  comment: Comment,\n  onClickUser?: (?any) => mixed,\n  /** Handler for any routing you may do on clicks on Hashtags */\n  onClickHashtag?: (word: string) => mixed,\n  /** Handler for any routing you may do on clicks on Mentions */\n  onClickMention?: (word: string) => mixed,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/CommentItem.md\n */\nexport default class CommentItem extends React.Component<Props> {\n  _user = () => {\n    const { user } = this.props.comment;\n    return user;\n  };\n\n  onClickUser = () => {\n    const { onClickUser } = this.props;\n    if (onClickUser) {\n      return onClickUser(this._user());\n    }\n  };\n\n  _getOnClickUser() {\n    return this.props.onClickUser ? this.onClickUser : undefined;\n  }\n\n  render() {\n    const { comment } = this.props;\n    return (\n      <div className=\"raf-comment-item\">\n        <Flex a=\"flex-start\" style={{ padding: '8px 0' }}>\n          {comment.user.data.profileImage && (\n            <Avatar\n              onClick={this._getOnClickUser()}\n              image={comment.user.data.profileImage}\n              circle\n              size={25}\n            />\n          )}\n        </Flex>\n        <Flex d=\"column\" style={{ flex: 1, margin: '0 8px' }}>\n          <div className=\"raf-comment-item__content\">\n            <time dateTime={comment.created_at} title={comment.created_at}>\n              <small>{humanizeTimestamp(comment.created_at)}</small>\n            </time>\n            <p>\n              <span\n                onClick={this._getOnClickUser()}\n                className=\"raf-comment-item__author\"\n              >\n                {comment.user.data.name}\n              </span>{' '}\n              {textRenderer(\n                comment.data.text,\n                'raf-comment-item',\n                this.props.onClickMention,\n                this.props.onClickHashtag,\n              )}\n            </p>\n          </div>\n        </Flex>\n      </div>\n    );\n  }\n}\n","//@flow\nimport React from 'react';\nimport ReactionList from './ReactionList';\nimport CommentItem from './CommentItem';\nimport LoadMorePaginator from './LoadMorePaginator';\nimport { smartRender } from '../utils';\nimport type { Renderable, Comment } from '../types';\n\nexport type Props = {|\n  /** The ID of the activity for which these comments are */\n  activityId: string,\n  /** The component that should render the comment */\n  CommentItem: Renderable,\n  /** By default pagination is done with a \"Load more\" button, you can use\n   * InifiniteScrollPaginator to enable infinite scrolling */\n  Paginator: Renderable,\n  /** Only needed for reposted activities where you want to show the comments\n   * of the original activity, not of the repost */\n  activityPath?: ?Array<string>,\n  /** Show and load comments starting with the oldest reaction first, instead\n   * of the default where comments are displayed and loaded most recent first.\n   */\n  oldestToNewest: boolean,\n  /** Reverse the order the comments are displayed in. */\n  reverseOrder: boolean,\n|};\n\n/**\n * CommentList uses ReactionList under the hood to render a list of comments.\n *\n * @example ./examples/CommentList.md\n */\nexport default class CommentList extends React.PureComponent<Props> {\n  static defaultProps = {\n    Paginator: LoadMorePaginator,\n    CommentItem,\n    oldestToNewest: false,\n    reverseOrder: false,\n  };\n\n  _Reaction = ({ reaction }: { reaction: Comment }) =>\n    smartRender(this.props.CommentItem, { comment: reaction });\n  render() {\n    const {\n      Paginator,\n      activityId,\n      activityPath,\n      oldestToNewest,\n      reverseOrder,\n    } = this.props;\n    return (\n      <React.Fragment>\n        <ReactionList\n          Paginator={Paginator}\n          activityId={activityId}\n          reactionKind={'comment'}\n          Reaction={this._Reaction}\n          activityPath={activityPath}\n          oldestToNewest={oldestToNewest}\n          reverseOrder={reverseOrder}\n        />\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\n\nimport React from 'react';\nimport Avatar from './Avatar';\nimport Button from './Button';\nimport Textarea from './Textarea';\nimport { inputValueFromEvent } from '../utils';\n\nimport type {\n  AddReactionCallbackFunction,\n  BaseActivityResponse,\n  Trigger,\n} from '../types';\n\nexport type Props = {|\n  activity: BaseActivityResponse,\n  onAddReaction: AddReactionCallbackFunction,\n  kind: string,\n  placeholder: string,\n  image?: string,\n  onSuccess?: () => mixed,\n  trigger?: Trigger,\n|};\n\ntype State = {|\n  text: string,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/CommentField.md\n */\nexport default class CommentField extends React.Component<Props, State> {\n  textareaRef = React.createRef();\n\n  state = {\n    text: '',\n  };\n\n  static defaultProps = {\n    placeholder: 'Start Typing...',\n  };\n\n  onSubmitForm = async (e: SyntheticEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (this.state.text !== '') {\n      try {\n        await this.props.onAddReaction('comment', this.props.activity, {\n          text: this.state.text,\n        });\n      } catch (e) {\n        return;\n      }\n      this.setState({ text: '' });\n      if (this.props.onSuccess) {\n        this.props.onSuccess();\n      }\n    }\n  };\n\n  _onChange = (event: SyntheticEvent<HTMLTextAreaElement> | Event) => {\n    const text = inputValueFromEvent(event);\n    if (text == null) {\n      return;\n    }\n    this.setState({ text });\n  };\n\n  componentDidMount() {\n    if (this.textareaRef.current) {\n      this.textareaRef.current.addEventListener('keydown', (e) => {\n        if (e.which === 13) {\n          if (\n            this.textareaRef.current &&\n            this.textareaRef.current.nextSibling === null\n          ) {\n            this.onSubmitForm(e);\n          }\n        }\n      });\n    }\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.onSubmitForm} className=\"raf-comment-field\">\n        {this.props.image ? (\n          <Avatar image={this.props.image} circle size={39} />\n        ) : null}\n        <div className=\"raf-comment-field__group\">\n          <Textarea\n            rows={1}\n            value={this.state.text}\n            placeholder={this.props.placeholder}\n            onChange={this._onChange}\n            trigger={this.props.trigger}\n            onPaste={() => null}\n            maxLength={280}\n            innerRef={this.textareaRef}\n          />\n          <Button\n            buttonStyle=\"primary\"\n            disabled={this.state.text === ''}\n            type=\"submit\"\n          >\n            post\n          </Button>\n        </div>\n      </form>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\ntype Props = {|\n  label: string,\n  data: string | number,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/DataLabel.md\n */\nexport default class DataLabel extends React.Component<Props> {\n  static defaultProps = {\n    label: 'label',\n    data: 'data',\n  };\n\n  render() {\n    return (\n      <div className=\"raf-data-label\">\n        <span className=\"raf-data-label__label\">{this.props.label}</span>\n        <span className=\"raf-data-label__data\">{this.props.data}</span>\n      </div>\n    );\n  }\n}\n"],"names":["humanizeTimestamp","timestamp","time","moment","utc","now","min","from","smartRender","ElementOrComponentOrLiteral","props","fallback","undefined","React","element","ComponentOrLiteral","React.createElement","userOrDefault","user","actor","notFound","id","created_at","updated_at","data","name","profileImage","error","generateRandomId","S4","Math","random","toString","substring","dataTransferItemsHaveFiles","items","length","item","kind","type","dataTransferItemsToFiles","fileLikes","blobPromises","file","getAsFile","push","parser","DOMParser","Promise","accept","getAsString","s","doc","parseFromString","imageTags","getElementsByTagName","imagePromises","tag","src","fetch","res","contentType","headers","get","arrayBuffer","buf","blob","Blob","all","inputValueFromEvent","event","target","currentTarget","inputTarget","value","sanitizeURL","url","proto","URL","protocol","textRenderer","text","parentClass","onClickMention","onClickHashtag","split","map","word","i","includes","mention","twitter","extractMentions","React.Fragment","startsWith","slice","indexOf","endsWith","hashtag","extractHashtags","anchorme","validate","email","link","list","encoded","urlText","_truncate","reduce","accu","elem","FeedManager","activityOrder","activities","immutable","Map","activityIdToPath","activityIdToPaths","reactionIdToPaths","reactionActivities","lastResponse","lastReverseResponse","refreshing","realtimeAdds","realtimeDeletes","subscription","unread","unseen","numSubscribers","reactionsBeingToggled","childReactionsBeingToggled","changed","state","triggerUpdate","label","activity","track","analyticsClient","console","warn","feed","client","feedGroup","userId","trackEngagement","feed_id","content","foreign_id","location","analyticsLocation","activityId","activityPath","rest","reaction","reactionId","options","doReactionAddRequest","reactions","add","errorHandler","trackAnalytics","enrichedReaction","fromJS","full","setState","prevState","getActivityPaths","path","removeFoundReactionIdPaths","getIn","toJS","updateIn","v","List","unshift","addFoundReactionIdPaths","doReactionDeleteRequest","remove","findIndex","r","_removeActivityFromState","togglingReactions","currentReactions","last","onRemoveReaction","onAddReaction","doChildReactionAddRequest","childReaction","addChild","getReactionPaths","doChildReactionDeleteRequest","onRemoveChildReaction","onAddChildReaction","getActivityPath","outerId","groupArrayPath","removeFoundActivityIdPath","removeFoundActivityIdPaths","removeIn","size","addFoundActivityIdPath","addFoundActivityIdPaths","filter","doActivityDeleteRequest","removeActivity","group","_onMarkAs","markArg","groupArray","Array","isArray","g","doFeedRequest","limit","id_lte","counterKey","counter","groupId","markerPath","setIn","extraOptions","propOpts","id_gt","id_gte","id_lt","offset","refresh","withReactionCounts","withOwnReactions","response","results","a","aggregatedResponse","forEach","act","previous","currentPath","addFoundActivities","obj","pop","_isPlainObject","verb","object","k","addFoundReactions","basePath","oldLength","removeFoundReactions","_remove","_isEqual","setReactionActivities","getOptions","newState","responseToActivityMap","responseToActivityIdToPath","responseToActivityIdToPaths","feedResponseToReactionIdToPaths","responseToReactionActivities","unseenUnreadFromResponse","mark_seen","mark_read","notify","subscribe","numActivityDiff","deleted","concat","then","log","err","registeredCallbacks","cancel","Boolean","next","nextURL","query","merge","oldestToNewest","activity_id","orderPrefix","latestReactionsPath","nextUrlPath","refreshingPath","reactions_extra","nextUrl","doReactionsFilterRequest","reactionResponseToReactionIdToPaths","initialOptions","previousUrl","callback","splice","unsubscribe","handleError","detail","alert","getErrorMessage","stream","errors","StreamApiError","fallbackErrorMessage","statusCode","body","suffix","StreamContext","changedUserData","sharedFeedManagers","StreamApp","getOrCreate","defaultUserData","initClientState","userData","prevProps","apiKey","token","appId","getUserInfo","children","width","height","minHeight","display","flexDirection","alignItems","justifyContent","color","backgroundColor","fontFamily","userToken","sharedFeeds","StreamAppConsumer","appCtx","Error","Child","connect","analyticsToken","StreamAnalytics","setUser","currentUser","feedProps","manager","FeedContext","Feed","_appCtxWrapperFunc","FeedInner","forceUpdate","onToggleReaction","onToggleChildReaction","onRemoveActivity","onMarkAsRead","onMarkAsSeen","hasDoneRequest","refreshUnreadUnseen","loadNextReactions","loadNextPage","hasNextPage","loadReverseNextPage","hasReverseNextPage","feedId","register","boundForceUpdate","clientDifferent","notifyDifferent","feedDifferent","optionsDifferent","doFeedRequestDifferent","unregister","getCtx","Avatar","image","alt","rounded","circle","onClick","placeholder","PureComponent","UserBar","avatar","onClickUser","username","AfterUsername","icon","subtitle","Right","Card","trimmedUrl","replace","e","handleClose","images","nolink","svg","IconButton","_handleClose","__html","title","description","trimUrl","Component","Audio","audioRef","current","pause","updateProgress","playing","setInterval","play","window","clearInterval","position","currentTime","duration","progress","pauseAudio","open","og","audio","audios","secure_url","playAudio","FontAwesomeIcon","faPlayCircle","faPauseCircle","Video","videos","video","CloseButton","videoProps","controls","preload","poster","parsedUrl","urlsThatAreGifs","gifUrl","host","autoPlay","muted","loop","playsInline","site_name","Gallery","currentImage","lightboxIsOpen","openLightbox","getImages","gotoPrevious","gotoNext","closeLightbox","Activity","padding","_getOnClickUser","HeaderRight","trim","attachments","Object","keys","files","mimeType","FileIcon","Header","renderHeader","Content","renderContent","Footer","renderFooter","Link","to","NewActivitiesNotification","adds","deletes","labelSingle","labelPlural","labelFunction","addCount","deleteCount","count","_labelFunction","Button","buttonStyle","onKeyPress","disabled","loading","LoadingIndicator","LoadMoreButton","LoadMorePaginator","reverse","FeedPlaceholder","FlatFeed","feedCtx","Notifier","Placeholder","Paginator","FlatFeedInner","ref","listRef","scrollToOffset","_renderActivity","args","_childProps","_refresh","notifierProps","_renderWrappedActivity","ImmutableItemWrapper","renderItem","AvatarGroup","stopPropagation","users","avatarSize","AttachedActivity","Thumbnail","Dropdown","dropdownBox","contains","document","removeEventListener","hideMenu","addEventListener","showMenu","bind","Notification","onClickNotification","activityGroup","headerText","headerSubtext","latestActivity","lastActor","_getOnClickNotification","is_read","getUsers","NotificationFeed","makeDefaultOptions","Group","copy","NotificationFeedInner","_renderGroup","clear","_renderWrappedGroup","SinglePost","withRecentReactions","getActivityDetail","Panel","panelStyle","PanelHeading","PanelFooter","PanelContent","AutocompleteItem","entity","native","Textarea","innerRef","trigger","dataProvider","emojis","emojiIndex","search","component","output","key","caretPosition","el","rows","maxLength","onChange","onPaste","EmojiPicker","createRef","emojiPicker","preventDefault","Picker","onSelect","Title","fontSize","StatusUpdateForm","activityVerb","modifyActivityData","d","StatusUpdateFormInner","textInputRef","imageUploads","imageOrder","fileUploads","fileOrder","ogUrlOrder","ogStateByUrl","ogActiveUrl","submitting","dismissed","_orderedImages","_text","upload","_orderedFiles","_orderedOgStates","some","scrapingActive","_object","every","_isOgScraping","addActivity","onSuccess","emoji","_insertText","insertedText","prevText","textareaElement","_getTextAreaElement","selectionStart","selectionEnd","newCursorPosition","_uploadNewImage","File","_uploadNewFile","FileReader","reader","onload","previewUri","result","readAsDataURL","_uploadImage","_uploadFile","img","alreadyRemoved","_id","_handleOgDebounced","_debounce","handleOG","leading","trailing","newUrls","removedUrls","urlInfos","exclude","info","urls","_uniq","oldUrls","_difference","_includes","ogState","resp","uploadedImages","_uploadedImages","uploadedFiles","_uploadedFiles","_activeOg","modifiedActivity","doRequest","activeOg","availableOg","_availableOg","onSubmitForm","ImageDropzone","_uploadNewFiles","marginRight","_onChange","clipboardData","plainTextPromise","resolve","margin","_dismissOg","faBookmark","ImagePreviewer","_removeImage","FilePreviewer","_removeFile","flex","ImageUploadButton","FileUploadButton","_onSelectEmoji","FooterItem","_canSubmit","IconBadge","hidden","showNumber","DropdownPanel","arrow","right","left","NotificationDropdown","NotificationDropdownInner","closeDropdown","dropdownRef","openDropdown","Icon","top","maxWidth","zIndex","visibility","transform","opacity","transition","InfiniteScroll","scrollListener","pageLoaded","pageStart","attachScrollListener","detachScrollListener","detachMousewheelListener","loader","defaultLoader","scrollEl","useWindow","scrollComponent","parentNode","mousewheelListener","useCapture","getParentElement","hasMore","isLoading","initialLoad","deltaY","documentElement","scrollTop","pageYOffset","isReverse","calculateOffset","scrollHeight","clientHeight","Number","threshold","offsetParent","loadMore","calculateTopPosition","offsetHeight","innerHeight","offsetTop","renderProps","filterProps","node","childrenArray","createElement","PropTypes","isRequired","bool","func","number","InfiniteScrollPaginator","Loader","ReactionIcon","counts","dimensions","onPress","ReactionToggleIcon","inactiveIcon","activeIcon","own_reactions","restProps","LikeButton","children_counts","own_children","reaction_counts","_onPress","likebuttonActive","likebuttonInactive","RepostButton","RepostButtonInner","targetFeeds","repostButtonActive","repostButtonInactive","FollowButton","followed","ReactionList","reverseOrder","ReactionListInner","Reaction","reactionKind","reactionsOfKind","renderReaction","Flex","j","justifySelf","js","flexWrap","w","style","CommentItem","comment","_user","CommentList","_Reaction","CommentField","textareaRef","which","nextSibling","DataLabel"],"mappings":"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"}